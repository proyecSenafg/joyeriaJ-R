(window.webpackJsonptheoWebApp=window.webpackJsonptheoWebApp||[]).push([[6],{"/Amf":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderDirtyEvent=void 0;const r=i("UzQk"),n=i("lzL7");let s=0;class o{constructor(e){this.type=o.TYPE,this.displayObject=e}}t.RenderDirtyEvent=o,o.TYPE="render-dirty";class a{constructor(e,t,i=new PIXI.Container){this.id="viewid:"+s++,this.isDirtyPlacement=!0,this.isDirtyRender=!0,this.isDirtyFilter=!0,this.isDestroyed=!1,this.renderScale=1,this.filters=[],this.mimicNode=e,this.pixiApp=t.pixiApp,this.asyncRenderer=t,this.log=t.log,this.renderScale=this.asyncRenderer.currentRenderScale,this.opacity=1,this.pixiDisplayObject=i,this.type=Object.getPrototypeOf(this).constructor.TYPE,this.localPlacement=e.compositing.placement,this.globalPlacement=e.ctm,this.opacity=e.compositing.opacity}static areaOfBoundsAtDocumentScale(e,t){const i=n.default.decomposeScale(e.asArray),r=t.maxX-t.minX,s=t.maxY-t.minY;return r*i.x*(s*i.y)}static isBoundsInDocument(e,t,i,r){const n=t.transformRect(e);return n.maxX>=0&&n.maxY>=0&&n.minX<=i&&n.minY<=r}static mapPGMBlendModeToPixi(e){switch(e){case r.PGMBlendModeEnum.Normal:default:return PIXI.BLEND_MODES.NORMAL;case r.PGMBlendModeEnum.Multiply:return PIXI.BLEND_MODES.MULTIPLY;case r.PGMBlendModeEnum.Screen:return PIXI.BLEND_MODES.SCREEN}}get globalScale(){return this.globalPlacement?n.default.decomposeScale(this.globalPlacement.asArray):{x:1,y:1}}get localScale(){return this.localPlacement?n.default.decomposeScale(this.localPlacement.asArray):{x:1,y:1}}get pgmBlendMode(){return this.mimicNode.compositing.blendMode}get hasNonNormalBlendMode(){return this.pgmBlendMode!==r.PGMBlendModeEnum.Normal}get pixiBlendMode(){return a.mapPGMBlendModeToPixi(this.pgmBlendMode)}get meta(){const e=this.mimicNode.ref.child;return{part:e.meta.part||e.entity||"",id:e.meta.id||this.mimicNode.id||""}}get pgmNode(){return this.mimicNode.ref.child}get pgmPart(){const e=this.pgmNode,t=e&&e.meta;return t&&t.part}get isRootOfBlendModeHierarchy(){return this.mimicNode instanceof r.PGMMimicGroupNode&&"frame"===this.pgmPart||this.mimicNode instanceof r.PGMMimicClipNode&&this.mimicNode.children.some(e=>e instanceof r.PGMMimicShapeNode)}destroy(e){if(this.isDestroyed=!0,this.pixiDisplayObject.filters){for(const e of this.pixiDisplayObject.filters)"function"==typeof e.destroy&&e.destroy();this.pixiDisplayObject.filters=null}this.pixiDisplayObject.destroy(),this.pixiDisplayObject=null,this.filters=[]}insertChild(e,t,i){const r=i.binding;r.parent=this,this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}removeChild(e,t,i){const r=i.binding;r.parent=void 0,this.pixiDisplayObject.removeChild(r.pixiDisplayObject)}reinsertChild(e,t,i){const r=i.binding;this.pixiDisplayObject.addChildAt(r.pixiDisplayObject,t)}changeCompositing(e,t,i){}changePlacement(e,t,i){this.localPlacement=i,this.isDirtyPlacement=!0}changeBlendMode(e,t,i){this.isRootOfBlendModeHierarchy&&(this.isDirtyFilter=!0)}changeOpacity(e,t,i){this.opacity=i,this.isDirtyFilter=!0}changeCTM(e,t,i){this.changeGlobalPlacement(this.globalPlacement,i)}changeProperties(e,t){this.isDirtyRender=!0}changeRenderScale(e,t){this.renderScale=t}changeGlobalPlacement(e,t){this.globalPlacement=t}isVisibleWithinDocument(e){return!0}endConformSummary(e,t,i){this.asyncRenderer.activeRender.fullValidation||this.validate()}validate(){const e=this.isVisibleWithinDocument(this.mimicNode);this.renderScale!==this.asyncRenderer.currentRenderScale&&this.changeRenderScale(this.renderScale,this.asyncRenderer.currentRenderScale);const t=this.mimicNode.ctm;if(this.globalPlacement.equal(t)||this.changeGlobalPlacement(this.globalPlacement,t),!this.pixiDisplayObject.visible&&!e)return;let i=!1;if(this.isDirtyPlacement&&(this.place(),i=!0),this.isDirtyFilter&&(this.filter(),i=!0),this.isDirtyRender&&(this.render(),i=!0),i){const e=new o(this);this.bubble(e.type,e)}this.pixiDisplayObject.visible=e}place(){const e=this.pixiDisplayObject.transform;e&&e.setFromMatrix(new PIXI.Matrix(...this.localPlacement.asArray)),this.isDirtyPlacement=!1}autoApplyAlphaFilter(){return!0}filter(){const e=this.hasNonNormalBlendMode;let t=!1;if(e&&this.isRootOfBlendModeHierarchy&&(t=!0),(1!==this.opacity||t)&&this.autoApplyAlphaFilter()){const t=new PIXI.filters.AlphaFilter;if(t.resolution=this.pixiApp.renderer.resolution,t.alpha=this.opacity,e){if(this.filters.length>0)for(let e=0;e<this.filters.length;++e)this.filters[e].blendMode=PIXI.BLEND_MODES.NORMAL;t.blendMode=this.pixiBlendMode}this.filters.push(t)}if(this.pixiDisplayObject.filters)for(const e of this.pixiDisplayObject.filters)this.filters.includes(e)||"function"!=typeof e.destroy||e.destroy();this.pixiDisplayObject.filters=this.filters,this.filters=[],this.isDirtyFilter=!1}render(){this.isDirtyRender=!1}bubble(e,t){this.pixiDisplayObject.emit(e,t),this.parent&&this.parent.bubble?this.parent.bubble(e,t):this.pixiApp.stage&&this.pixiApp.stage.emit(e,t)}}t.default=a,a.TYPE="post-display-object"},"0gjg":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static parseHexFromInt(e){var t=e.toString(16);return 1===t.length?"0"+t:t}static rgb2hex(e){return this.parseHexFromInt(Math.round(255*e.red))+this.parseHexFromInt(Math.round(255*e.green))+this.parseHexFromInt(Math.round(255*e.blue))}static rgba2css({red:e,green:t,blue:i,alpha:r=1}){return`rgba(${Math.round(255*e)},${Math.round(255*t)},${Math.round(255*i)},${r})`}static rgb2ValidCSSValues(e){return{red:Math.round(e.red),green:Math.round(e.green),blue:Math.round(e.blue),alpha:e.alpha||1}}static toCSS(e){if(!e)return"#000000";if(void 0!==e.red||void 0!==e.r){var t=void 0!==e.red?e.red:e.r,i=void 0!==e.green?e.green:e.g,n=void 0!==e.blue?e.blue:e.b,s=void 0!==e.alpha?e.alpha:e.a,o=this.rgb2ValidCSSValues({red:t,green:i,blue:n,alpha:s});return"rgba("+o.red+","+o.green+","+o.blue+","+(void 0===s?1:s)+")"}return"string"==typeof e&&6===e.length?"#"+e:"string"==typeof e&&e.match(new RegExp("^#[0-9a-fA-F]{6}$"))?e:"number"==typeof e?"#"+r.parseHexFromInt(e):"#000000"}static solidColor2Rgba(e){return e?{red:Math.floor(255*e.red),green:Math.floor(255*e.green),blue:Math.floor(255*e.blue),alpha:e.alpha}:null}}t.default=r},"1HQJ":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"213o":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),n=i("/Amf"),s=i("hxFN"),o=i("fziT"),a=i("5m7E"),l=i("pMCj"),h=i("JuUW"),c=i("LBjK"),d=i("3HR0"),u=i("d1kN"),p=i("au89"),m=function(e){if(!e)return null;let t=e;if(t&&t.texture)return t;for(var i=0;i<e.children.length;++i)if(t=m(e.children[i]),t&&t.texture)return t;return null};class f extends n.default{constructor(e,t){super(e,t),this.imageIsLoaded=!1,this.pixiDisplayObject.on("image-not-loaded",this.handleSubtreeImageLoading,this),this.pixiDisplayObject.on("image-loaded",this.handleSubtreeImageLoaded,this);const i=e;this._changeSpec(i.spec),this.reuseCachedTextures=!1}cleanCachedTexture(){this.cachedTexture1&&this.cachedTexture1.destroy(!0),this.cachedTexture2&&this.cachedTexture2.destroy(!0),this.cachedTexture1=null,this.cachedTexture2=null}destroy(e){this.cleanCachedTexture(),super.destroy(e)}handleSubtreeImageLoading(){this.imageIsLoaded=!1}handleSubtreeImageLoaded(){this.imageIsLoaded=!0,this.place(),this.filter()}_changeSpec(e){this.isDirtyFilter=!0}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case"spec":this._changeSpec(i.spec)}}),this.isDirtyRender=!0,super.changeProperties(e,t)}changeRenderScale(e,t){this.isDirtyFilter=!0,super.changeRenderScale(e,t)}place(){this.imageIsLoaded&&super.place()}endConformSummary(e,t,i){this.reuseCachedTextures=!i,super.endConformSummary(e,t,i),this.reuseCachedTextures=!1}filter(){this.reuseCachedTextures||this.cleanCachedTexture();const e=this.mimicNode.spec,t=this.pixiApp.renderer.resolution;if(void 0===e)return;const i=Object.getPrototypeOf(e).constructor.TYPE;let n;switch(i){case"PGMDuotoneFilterSpec":n=new o.default(e.intensity,[e.darkColor.red,e.darkColor.green,e.darkColor.blue],[e.lightColor.red,e.lightColor.green,e.lightColor.blue],t);break;case"PGMFillFilterSpec":n=new a.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue,e.filterColor.alpha],t);break;case"PGMScreenFilterSpec":n=new l.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t);break;case"PGMOverlayFilterSpec":n=new h.default([e.filterColor.red,e.filterColor.green,e.filterColor.blue],t);break;case"PGMColorTransformFilterSpec":n=new s.default([e.rdot.red,e.rdot.green,e.rdot.blue,e.rdot.alpha,e.gdot.red,e.gdot.green,e.gdot.blue,e.gdot.alpha,e.bdot.red,e.bdot.green,e.bdot.blue,e.bdot.alpha,e.adot.red,e.adot.green,e.adot.blue,e.adot.alpha],[e.bias.red,e.bias.green,e.bias.blue,e.bias.alpha],t);break;case"PGMColorAdjustmentFilterSpec":n=new c.default(e,t);break;case"PGMBlurFilterSpec":const f=this.renderScale,g=6*e.scaledBlur*f,x=e.edgeClamp;if(g>0){const e=Math.max(4,Math.min(15,Math.floor(g/2))),i=g/5,r=new p.KawaseBlurFilter(i,e,x);r.padding=x?0:Math.ceil(6*i),i<2.5&&(r.resolution=t),n=r}break;case"PGMMaskFilterSpec":if(r.LegacyCoreAssert.isTrue(2==this.pixiDisplayObject.children.length,"what do we expect PostLuminosityFilter to do with children other than two?"),2===this.pixiDisplayObject.children.length){const i=this.pixiDisplayObject.children[0],r=this.pixiDisplayObject.children[1];if(i&&i.renderable&&r){r.renderable=!0,this.reuseCachedTextures&&this.cachedTexture1||(this.cachedTexture1=this.pixiApp.renderer.generateTexture(r,PIXI.settings.SCALE_MODE,t));const i=m(r);this.cachedTexture1&&i&&(n=new u.default(this.cachedTexture1,i,e.matte.asArray,t)),r.renderable=!1}}break;case"PGMBlendFilterSpec":let y=m(this.pixiDisplayObject);if(y&&y.texture){if(r.LegacyCoreAssert.isTrue(2==this.pixiDisplayObject.children.length,"what do we expect PostAlphablendFilter to do with children other than two?"),2==this.pixiDisplayObject.children.length){const i=this.pixiDisplayObject.children[0],r=this.pixiDisplayObject.children[1];i.renderable&&r.renderable&&(this.reuseCachedTextures&&this.cachedTexture1||(this.cachedTexture1=this.pixiApp.renderer.generateTexture(i,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution),this.cachedTexture2=this.pixiApp.renderer.generateTexture(r,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution)),this.cachedTexture1&&this.cachedTexture2&&(n=new d.default(this.cachedTexture1,this.cachedTexture2,y,e.weights[0],e.weights[1],t)))}}else console.warn("No sprite found -- image not loaded yet?. Disabling blending!");break;default:console.error("apply unknown filter",i)}n&&(n.blendMode=this.pixiBlendMode,this.filters.push(n)),super.filter()}}t.default=f,f.TYPE="filter"},"3HR0":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r,n,s=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\n// Params for the first texture.\nuniform float weight0;\nuniform sampler2D uSampler0;\nuniform mat3 filterMatrix0;\n\n// Params for the second texture\nuniform float weight1;\nuniform sampler2D uSampler1;\n\n// Params for the second texture -- provided by Pixi and the name is fixed.\n// Furthermore the uvCoords are built for this one, so no matrix needed.\n// uniform sampler2D texture1;\n// uniform sampler2D inputImageTexture;\n\nvoid main()\n{\n    vec2 texCoord0 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    vec2 texCoord1 = (filterMatrix0 * vec3(vTextureCoord, 1)).xy;\n    lowp vec4 c0 = texture2D(uSampler0, texCoord0);\n    lowp vec4 c1 = texture2D(uSampler1, texCoord1);\n    lowp vec4 c2 = weight0 * c0 + weight1 * c1;\n    lowp vec4 c3 = vec4(\n                    c2.r * c2.a * c1.a * c0.a,\n                    c2.g * c2.a * c1.a * c0.a,\n                    c2.b * c2.a * c1.a * c0.a,\n                    c2.a * c1.a * c0.a\n                    );\n    gl_FragColor = c3;\n}\n\n",{weight0:{type:"float",value:r},weight1:{type:"float",value:n},uSampler0:{type:"sampler2d",value:e},uSampler1:{type:"sampler2d",value:t},filterMatrix0:{type:"mat3",value:null}}),this.filterSprite=i,this.resolution=s}apply(e,t,i,r){const n=new PIXI.Matrix;this.uniforms.filterMatrix0=e.calculateSpriteMatrix(n,this.filterSprite),super.apply(e,t,i,r)}}t.default=r},"3hRk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameErrorEvent=t.FrameProductionCanceledEvent=t.FrameProductionCompleteEvent=t.FrameDataEvent=t.FrameEvent=void 0;class r{constructor(e){this.type=e}}t.FrameEvent=r;class n extends r{constructor(e,t,i){super(n.TYPE),this.frameIndex=e,this.time=t,this.image=i}}t.FrameDataEvent=n,n.TYPE="frame";class s extends r{constructor(){super(s.TYPE)}}t.FrameProductionCompleteEvent=s,s.TYPE="complete";class o extends r{constructor(){super(o.TYPE)}}t.FrameProductionCanceledEvent=o,o.TYPE="canceled";class a extends r{constructor(e){super(a.TYPE),this.err=e}}t.FrameErrorEvent=a,a.TYPE="error"},"5m7E":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec4 filterColor;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = vec4(\n                    filterColor.r * textureColor.a,\n                    filterColor.g * textureColor.a,\n                    filterColor.b * textureColor.a,\n                    textureColor.a\n                    );\n\n}\n",{filterColor:{type:"vec4",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},"6xl/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},"6ygk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiRenderer=void 0;const r=i("zrCk"),n=i("hhcO"),s=i("z8uW"),o=i("DAf/"),a=i("UzQk");t.PixiRenderer=class{constructor(e,t,i){this.host=e,this.defaultAssetLoader=t||new o.NullAssetLoader,this.log=i||a.LegacyCoreAssert.newLog("PixiRenderer"),this.imageService=new r.PixiImageService(this),this.liveViewService=new n.PixiLiveViewService(this),this.frameProductionService=new s.PixiFrameProductionService(this)}}},"7frk":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("CkXF"),n=i("wYSo"),s=i("/Amf");class o extends r.default{constructor(e,t){super(e,t),this.maskContainer=new PIXI.Container,this.maskContentTransform=new PIXI.Container,this.maskingSprite=new PIXI.Sprite,this.maskBacking=new PIXI.Graphics,this.maskTextureBounds=new PIXI.Rectangle(0,0,1,1),this.isInitialized=!1,this.isInRenderQ=!1,this.currentRenderWidth=0,this.currentRenderHeight=0,this.debug("constructor()")}debug(e){}destroy(e){this.maskingSprite.destroy(),this.maskingSprite=null,this.maskBacking.destroy(),this.maskBacking=null,this.maskContainer.destroy(),this.maskContainer=null,this.maskContentTransform.destroy(),this.maskContentTransform=null,this.artwork=null,this.mask=null,super.destroy(e)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}changeGlobalPlacement(e,t){this.isDirtyRender=!0,super.changeGlobalPlacement(e,t)}onChangeMaskArtwork(e){this.debug("mask artwork dirty"),this.isDirtyRender=!0}onFirstRenderInit(){this.maskContainer.addChild(this.maskBacking,this.maskContentTransform),this.pixiApp.stage.addChild(this.maskingSprite),this.artwork=this.pixiDisplayObject.children[0],this.mask=this.pixiDisplayObject.children[1],this.maskContentTransform.addChild(this.mask),this.debug("onFirstRenderInit"),this.mask.on(s.RenderDirtyEvent.TYPE,e=>this.onChangeMaskArtwork(e)),this.artwork.mask=this.maskingSprite,this.mask.on("image-loaded",()=>this.updateMaskTexture())}deferredRender(){this.isDestroyed||this.updateMaskTexture(),this.isInRenderQ=!1,this.notifyAsyncRenderEnd()}renderMask(e,t){if(e===this.currentRenderWidth&&t===this.currentRenderHeight)return!0;const i=this.pixiApp.stage.scale.x;return this.currentRenderWidth=e,this.currentRenderHeight=t,this.maskContainer.scale.set(i),this.maskBacking.clear(),this.maskBacking.beginFill(16777215),this.maskBacking.drawRect(0,0,e/i,t/i),this.maskBacking.endFill(),this.maskTextureBounds.width=e,this.maskTextureBounds.height=t,!1}render(){this.debug("render begin"),this.isInitialized||(this.onFirstRenderInit(),this.isInitialized=!0),this.updateMaskTexture(),!this.isInRenderQ&&n.default.instance.hasItemsInQueue()&&(this.notifyAsyncRenderBegin(),this.isInRenderQ=!0,n.default.instance.addLowPriority(this.deferredRender.bind(this))),super.render(),this.debug("render end")}updateMaskTexture(){const e=this.renderMask(this.pixiApp.renderer.width,this.pixiApp.renderer.height),t=new PIXI.Matrix(...this.globalPlacement.asArray);if(this.maskContentTransform.transform.setFromMatrix(t),this.maskingSprite.scale.set(1/this.pixiApp.stage.scale.x),e&&this.maskingSprite.texture){const e=new PIXI.Matrix;this.pixiApp.renderer.render(this.maskContainer,this.maskingSprite.texture,!1,e,!!this.maskContainer.parent)}else this.maskingSprite.texture&&this.maskingSprite.texture.destroy(!0),this.maskingSprite.texture=this.pixiApp.renderer.generateTexture(this.maskContainer,PIXI.settings.SCALE_MODE,this.pixiApp.renderer.resolution,this.maskTextureBounds)}}t.default=o,o.TYPE="luminosity-mask"},BTPj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},CkXF:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");class n extends r.default{constructor(e,t){super(e,t),this.pendingRenders=0}notifyAsyncRenderBegin(){this.pendingRenders++,this.bubble("async-render-begin")}notifyAsyncRenderEnd(){this.bubble("async-render-end",this.pendingRenders),this.pendingRenders=0}}t.default=n},"DAf/":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpPixiLoaderPlugin=t.NullAssetLoader=void 0;t.NullAssetLoader=class{getURLforContentID(e,t,i){throw new Error("You're using a NullAssetLoader, which can't load assets. ")}};t.NoOpPixiLoaderPlugin=class{pre(e,t){t()}use(e,t){t()}}},Ej8W:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RenderHints=void 0;const r=i("UzQk"),n=i("vr9a"),s=i("IHB5"),o=i("kSzJ"),a=i("sodY"),l=i("s96w"),h=a.default.instance;var c;!function(e){e.AsyncRender="async-render",e.FullQuality="full-quality",e.RenderSetup="render-setup"}(c||(c={}));class d{constructor(e){this.blockCategories=[],this.graph=e.graph,this.time=e.time,this.target=e.target,this.assetLoader=e.assetLoader,this.fullQuality=e.fullQuality,this.fullValidation=e.fullValidation,this.log=e.log,this.completionPromise=new Promise((e,t)=>{this.completeResolve=()=>{e()}})}blockCompletion(e){this.blockCategories.push(e)}unblockCompletion(e){const t=this.blockCategories.indexOf(e);if(-1===t){const t=`ActiveRender: unblocking category not previously blocked ("${e}").`;throw this.log.error(t),new Error(t)}this.blockCategories.splice(t,1),0===this.blockCategories.length&&window.setTimeout(()=>this.completeResolve(),0)}}class u{constructor(){this.isAnimating=!1,this.isProducingVideo=!1}}t.RenderHints=u;class p{constructor(e){var t,i;this.id="instance:"+p.nextInstanceID++,this.hints=new u,this.pendingImageLoadCount=0,this.backlog=0,this.graphVersion=0,this.defaultAssetLoader=e.assetLoader,this.renderQueue=new Promise((e,t)=>{setTimeout(e,50)}),this.pixiApp=e.hostAPI.createPixiApp({width:32,height:32,antialias:!0,transparent:!0,preserveDrawingBuffer:null!==(t=e.preserveDrawingBuffer)&&void 0!==t&&t,resolution:1,sharedTicker:!1,autoStart:!1}),this.pixiApp.stage.on("image-loaded",this.handleImageLoaded,this),this.pixiApp.stage.on("image-loading",this.handleImageLoading,this),this.pixiApp.stage.on("async-render-begin",this.handleAsyncRenderBegin,this),this.pixiApp.stage.on("async-render-end",this.handleAsyncRenderEnd,this),this.pixiApp.stage.on("background-text-rerender-begin",this.handleBackgroundTextRerenderBegin,this),this.pixiApp.stage.on("background-text-rerender-end",this.handleBackgroundTextRerenderEnd,this),this.listener=null!==(i=e.listener)&&void 0!==i?i:e=>{},this.log=e.log,this.mimicEngine=new r.PGMMimicEngine(this,new r.PGMMimicConformerOptions(!0)),this.rootContainer=new PIXI.Container,this.pixiApp.stage.addChild(this.rootContainer),e.addDebugText&&(this.debugText=new PIXI.Text("FPS",{fontFamily:"Arial",fontSize:24,fill:16715792,align:"left"}),this.debugGraphic=new PIXI.Graphics(!0),this.pixiApp.stage.addChild(this.debugGraphic,this.debugText)),h.addListener(this)}getGLRenderer(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer:null}getRootRenderTarget(){return this.pixiApp.renderer instanceof o.WebGLRenderer?this.pixiApp.renderer.rootRenderTarget:null}handleAsyncRenderBegin(){var e;null===(e=this.activeRender)||void 0===e||e.blockCompletion(c.AsyncRender)}handleAsyncRenderEnd(){var e;null===(e=this.activeRender)||void 0===e||e.unblockCompletion(c.AsyncRender)}blockFullQuality(){var e;(null===(e=this.activeRender)||void 0===e?void 0:e.fullQuality)&&this.activeRender.blockCompletion(c.FullQuality)}unblockFullQuality(){var e;(null===(e=this.activeRender)||void 0===e?void 0:e.fullQuality)&&this.activeRender.unblockCompletion(c.FullQuality),this.listener(p.EVT_FULL_QUALITY_UPDATE)}handleImageLoaded(){this.unblockFullQuality(),this.pendingImageLoadCount--,0===this.pendingImageLoadCount&&this.listener(p.EVT_LOADING_IMAGES_END)}handleImageLoading(){this.blockFullQuality(),this.pendingImageLoadCount++,1===this.pendingImageLoadCount&&this.listener(p.EVT_LOADING_IMAGES_BEGIN)}handleBackgroundTextRerenderBegin(){this.blockFullQuality()}handleBackgroundTextRerenderEnd(){this.unblockFullQuality()}resetTextureCache(){h.resetLoadingState(),h.addListener(this)}onCachePrimed(){h.removeListener(this),this.listener(p.EVT_TEXTURE_CACHE_PRIMED)}setDebugText(e){this.debugText&&(this.debugText.text=e)}getDebugGraphic(){return this.debugGraphic}render(e,t,i,r){var s,o,a,u;if(null==e)return Promise.reject(new Error("PixiAsyncRenderer: can't render a null graph"));const m=null!==(s=r.assetLoader)&&void 0!==s?s:this.defaultAssetLoader,f=null!==(o=r.demultiplyAndFlip)&&void 0!==o&&o,g=null===(a=r.fullQuality)||void 0===a||a,x=null!==(u=r.postRenderCallback)&&void 0!==u?u:null;this.backlog++,this.backlog>10&&this.log.warning("backlog is "+this.backlog);let y,b=!1;return t.typeHint!==n.TargetRenderTypeHint.ForScreen&&h.preloadingHasCompleted(),this.renderQueue=this.renderQueue.then(()=>{var r,s;this.backlog--,this.listener(p.EVT_START_RENDER);const{width:o,height:a}=t,h=p.scaleToFitOrFill(o,a,e.bounds.aspectRatio,t.transformType==n.TargetTransformTypeEnum.FillCentered).width/e.bounds.width,u=!this.currentRenderSize||this.currentRenderSize.width!==o||this.currentRenderSize.height!==a||this.currentRenderScale!==h;return this.activeRender=new d({graph:e,time:i,target:t,assetLoader:m,fullQuality:g,fullValidation:u,log:this.log}),this.activeRender.blockCompletion(c.RenderSetup),u&&(this.currentRenderScale=h,this.currentRenderSize={width:o,height:a},this.pixiApp.setSize(o,a),this.pixiApp.renderer.resize(o,a),this.pixiApp.stage.scale.set(h)),e!==this.mimicEngine.graph&&this.graphVersion++,f?(this.demultiplyFilter=null!==(r=this.demultiplyFilter)&&void 0!==r?r:new l.default(this.pixiApp.renderer.resolution),this.rootContainer.filters=[this.demultiplyFilter]):this.rootContainer.filters=[],this.debug(`conform begin (graph=${this.graphVersion} time=${i})`),this.mimicEngine.graph=e,this.mimicEngine.time=i,this.mimicEngine.conform(),this.debug("conform end"),u&&(null===(s=this.mimicEngine.document.root)||void 0===s||s.visitPostOrder(e=>(e.binding.validate(),!1))),this.activeRender.unblockCompletion(c.RenderSetup),this.activeRender.completionPromise}).then(()=>{this.pixiApp.renderer&&this.pixiApp.renderer.render(this.pixiApp.stage);const t=this.activeRender&&this.activeRender.target;let i;return t&&t.typeHint===n.TargetRenderTypeHint.ForDebugging&&(i=this.walkPixiHierarchy(this.pixiApp.stage,e,{includeTextures:!1})),null==x?void 0:x(i)}).catch(e=>{b=!0,y=e}).then(()=>{this.activeRender=null,this.listener(p.EVT_END_RENDER),h.preloadingHasCompleted()}),this.renderQueue.then(()=>{if(b)throw y})}debug(e){}get canvas(){return this.pixiApp.view}destroy(){h.reset(this.id),this.pixiApp.destroyAll()}static scaleToFitOrFill(e,t,i,r){const n=e/t,s={width:e,height:t};return(r?n>i:n<i)?s.width=Math.round(s.height*i):s.height=Math.round(s.width/i),s}bindDocument(e){return this}bindNode(e){return s.default.viewInstanceForMimicNode(e,this)}createNode(e,t){return null}beginConform(e,t,i){}endConform(e,t,i){}setRoot(e,t){this.rootContainer.removeChildren(),this.rootContainer.addChild(t.binding.pixiDisplayObject)}static blendModeName(e){switch(e){case PIXI.BLEND_MODES.NORMAL:return"normal";case PIXI.BLEND_MODES.MULTIPLY:return"multiply";case PIXI.BLEND_MODES.SCREEN:return"screen";default:return"unknown "+e}}walkPixiHierarchy(e,t,i,r=null,n){const s=e.constructor.name,o=`${s}@${r?n:"root"}`;let a={type:s,uid:r?`${r}:${o}`:o};r||(a.fileIdentifier="Theo PixiRenderer hierarchy",a.renderSize=[this.currentRenderSize.width,this.currentRenderSize.height]),t&&(a.pgm=t.encode());const l=e.$theoBindingInfo;l&&(l.binding&&(a.binding=l.binding),l.part&&(a.part=l.part),l.id&&(a.id=l.id));const h=e.getLocalBounds();h&&(a.bounds=[h.x,h.y,h.width,h.height]);const c=e.localTransform;a.matrix=[c.a,c.b,c.c,c.d,c.tx,c.ty];const d=e.worldTransform,u=e.getBounds();if(a.worldMatrix=[d.a,d.b,d.c,d.d,d.tx,d.ty],a.worldBounds=[u.x,u.y,u.width,u.height],e instanceof PIXI.Sprite&&(a.blendMode=p.blendModeName(e.blendMode)),e.filters&&e.filters.length&&(a.filters=e.filters.reduce((e,t)=>{let i={};return t.uniforms&&(i=Object.entries(t.uniforms).reduce((e,t)=>{let i=t[1];return null!=i?Array.isArray(i)||"number"==typeof i||(i="function"==typeof i.entries?Array.from(i):"Matrix"===i.constructor.name?[i.a,i.b,i.c,i.d,i.tx,i.ty]:i.toString()):i=null,e[t[0]]=i,e},{})),t.blendMode!==PIXI.BLEND_MODES.NORMAL&&(i.blend=p.blendModeName(t.blendMode)),e[t.constructor.name]=i,e},{})),i.includeTextures){const t=this.pixiApp.renderer&&this.pixiApp.renderer.plugins.extract;if(t)try{const i=t.base64(e,"image/png");a.texture=i}catch(e){}}if(e instanceof PIXI.Container&&Array.isArray(e.children)&&e.children.length){const t=e.mask,n=t?e.children.filter(e=>e!==t):e.children;a.children=n.map((e,t)=>this.walkPixiHierarchy(e,null,i,a.uid,t)),t&&(a.mask=this.walkPixiHierarchy(t,null,i,r,"mask"))}return a}}t.default=p,p.nextInstanceID=0,p.EVT_LOADING_IMAGES_BEGIN="loading-images-begin",p.EVT_LOADING_IMAGES_END="loading-images-end",p.EVT_START_RENDER="start-render",p.EVT_END_RENDER="end-render",p.EVT_TEXTURE_CACHE_PRIMED="texture-cache-primed",p.EVT_FULL_QUALITY_UPDATE="full-quality-update"},Em2v:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),n(i("KdaU"),t)},Escq:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphTransportUtils=void 0;const r=i("UzQk");t.GraphTransportUtils=class{static convertAllLocalCompositeToExternalCC(e,t){let i=0,n={};return e.resources.forEach((e,s)=>{const o=s.storage;if(o instanceof r.StorageSpecLocalComposite)n[e]=new r.PGMResourceProvider(s.contentType,new r.StorageSpecExternalCC(r.StorageSpecExternalCC.POST_DOCUMENTS_SYNC_GROUP,t,o.componentID,null,o.contentType||s.contentType,null,null)),i++;else if(o instanceof r.StorageSpecHTTP)try{const a=new URL(o.url),l=a.pathname,h=l&&l.split("/").filter(e=>!!e);if(Array.isArray(h)&&h.length>=4&&"assets"===h[0]&&h[1]===r.StorageSpecExternalCC.POST_DOCUMENTS_SYNC_GROUP&&h[2]===t){const o=a.searchParams.get("accept")||s.contentType;n[e]=new r.PGMResourceProvider(o,new r.StorageSpecExternalCC(r.StorageSpecExternalCC.POST_DOCUMENTS_SYNC_GROUP,t,h[3],null,o,null,null)),i++}}catch(e){}else n[e]=s}),0===i?e:e.withResources(new r.PGMResourceProviderList(n))}}},H02z:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiAnimationFrameRenderer=void 0;const r=i("UzQk"),n=i("vr9a"),s=i("xBmG"),o=i("Ej8W"),a=i("uzmb"),l=i("vr9a");t.PixiAnimationFrameRenderer=class{constructor(e){this.graph=r.PGMGraph.EMPTY,this.dynamicParams=s.LiveViewDynamicRenderParams.DEFAULT,this.isSetupDirty=!0,this.rerenderNextTick=!1,this.lastRenderedGraph=null,this.lastRenderedTime=-1,this.lastRenderedTarget=null,this.waitingFrame=null,this.currentFrame=null,this.lastNow=0,this.renderer=new o.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!1,addDebugText:e.debugMode,listener:e=>this.handleAsyncRendererEvent(e)}),this.debugMode=e.debugMode||!1,this.targetParams=e.initialParameters||n.TargetRenderParameters.fit(32,32,a.RawEncoding.AsBuffer()),this.listener=e.listener||null,this.ticker=new PIXI.ticker.Ticker,this.ticker.autoStart=!1,this.ticker.add(this.handleAnimationTick,this),this.ticker.stop(),this.debugMode&&(this.fpsTimes=[],this.fpsDisplayTime=0)}startTicker(){this.ticker.started||this.ticker.start()}setupDirty(){this.isSetupDirty=!0,this.startTicker()}doRerenderNextTick(){this.rerenderNextTick=!0,this.startTicker()}handleAsyncRendererEvent(e){e===o.default.EVT_LOADING_IMAGES_BEGIN?this.listener&&this.listener.onLoadingImagesBegin():e===o.default.EVT_LOADING_IMAGES_END?this.listener&&this.listener.onLoadingImagesEnd():e===o.default.EVT_FULL_QUALITY_UPDATE?this.doRerenderNextTick():e===o.default.EVT_END_RENDER?(this.handleEndRenderEvent(),this.listener&&this.listener.onFrameRender(this.lastRenderedGraph,this.lastRenderedTime)):e===o.default.EVT_TEXTURE_CACHE_PRIMED&&this.listener&&this.listener.onTextureCachePrimed()}setTargetParameters(e){this.targetParams=e,this.setupDirty()}render(e,t){this.graph=e,this.dynamicParams=t||s.LiveViewDynamicRenderParams.DEFAULT,this.setupDirty()}get canvas(){return this.renderer.canvas}handleAnimationTick(e){if(!this.renderer.pixiApp.renderer)return;let t=0;const i=Date.now(),r=i-this.lastNow;if(this.lastNow=i,this.isSetupDirty&&(this.renderer.hints.isProducingVideo=this.targetParams&&this.targetParams.typeHint===l.TargetRenderTypeHint.ForVideo,this.graph.duration>0?(this.animationStartTimeMS=Date.now(),t=this.dynamicParams.startTime,this.renderer.hints.isAnimating=!0):(this.renderer.hints.isAnimating=!1,t=0),this.isSetupDirty=!1),this.graph.duration>0){const e=(i-this.animationStartTimeMS)/1e3,r=this.dynamicParams.startTime,n=(this.dynamicParams.endTime>=r?this.dynamicParams.endTime:this.graph.duration)-r;n>0&&(t=e>n?this.dynamicParams.loop?r+e%n:r+n:r+e)}if(this.rerenderNextTick)this.rerenderNextTick=!1;else if(r>0&&this.graph===this.lastRenderedGraph&&t===this.lastRenderedTime&&this.targetParams===this.lastRenderedTarget)return this.graph.duration>0&&this.listener&&this.listener.onAnimationComplete(this.graph),void this.ticker.stop();this.submitFrame({graph:this.graph,target:this.targetParams,time:t}),this.lastRenderedGraph=this.graph,this.lastRenderedTime=t,this.lastRenderedTarget=this.targetParams,this.debugMode&&this.renderFPS()}handleEndRenderEvent(){this.renderer&&this.waitingFrame?(this.renderer.render(this.waitingFrame.graph,this.waitingFrame.target,this.waitingFrame.time,{fullQuality:!1}),this.currentFrame=this.waitingFrame,this.waitingFrame=null):this.currentFrame=null}submitFrame(e){this.waitingFrame=e,this.currentFrame||this.handleEndRenderEvent()}renderFPS(){const e=this.fpsTimes||[],t=e.length,i=this.renderer.getDebugGraphic();let r=100,n=30,s=Math.round(PIXI.ticker.shared.FPS);t>100&&(s=Math.round((s+e[t-1]+e[t-2])/3)),t>120&&e.shift(),this.fpsTimes.push(s),this.fpsDisplayTime=(29*this.fpsDisplayTime+s)/30,this.renderer.setDebugText(" FPS "+Math.round(this.fpsDisplayTime)),i.clear(),i.beginFill(16777215),i.drawRect(0,0,344,34),i.beginFill(16711680),i.drawRect(100,0,240,30),i.beginFill(0),i.lineStyle(1,16777215),i.moveTo(r,0);for(var o=e.length-1;o>=2;o--){n=30-(e[o]+e[o-1]+e[o-2])/3/2,i.lineTo(r,n),r+=2}i.lineTo(r,0)}destroy(){this.ticker.remove(this.handleAnimationTick,this),this.renderer.destroy(),this.renderer=null}}},IHB5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("hUdH"),n=i("7frk"),s=i("eoxN"),o=i("vKWb"),a=i("vDtG"),l=i("kQtw"),h=i("213o"),c=i("UzQk");class d{static viewClassLookupForPgmNode(e){return this.lookup[this.viewTypeForPgmNode(e)]||this.lookup[this.DEFAULT_TYPE]}static viewTypeForPgmNode(e){let t=e.type.replace("pgm-","");if(e instanceof c.PGMFilter&&e){let i="filter-CutoutMask"===e.meta.part;"PGMMaskFilterSpec"!==Object.getPrototypeOf(e.spec).constructor.TYPE||i||(t="luminosity-mask")}return t}static viewInstanceForMimicNode(e,t){return new(this.viewClassLookupForPgmNode(e.ref.child))(e,t)}}t.default=d,d.DEFAULT_TYPE=l.default.TYPE,d.lookup={[r.default.TYPE]:r.default,[n.default.TYPE]:n.default,[s.default.TYPE]:s.default,[o.Text.TYPE]:o.Text,[a.default.TYPE]:a.default,[l.default.TYPE]:l.default,[h.default.TYPE]:h.default}},JuUW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\n    //lowp vec4 inputColor = (textureColor + 0.5) * 0.5;\n    lowp vec4 inputColor = textureColor;\n\n\n    gl_FragColor = vec4(\n                    (inputColor.r < 0.5 ? (2.0 * inputColor.r * filterColor.r) : (1.0 - 2.0 * (1.0 - inputColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n                    (inputColor.g < 0.5 ? (2.0 * inputColor.g * filterColor.g) : (1.0 - 2.0 * (1.0 - inputColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n                    (inputColor.b < 0.5 ? (2.0 * inputColor.b * filterColor.b) : (1.0 - 2.0 * (1.0 - inputColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n                    textureColor.a\n                    );\n}\n",{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},KdaU:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmojiUtils=void 0;const r=i("uFVl")();t.EmojiUtils=class{static isEmoji(e){return!!e.match(r)}static hasEmoji(e){for(const t of e)if(this.isEmoji(t))return!0;return!1}}},LBjK:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),n=i("p17C"),s=i("sodY");class o extends PIXI.Filter{constructor(e,t=1){var i=r.MoaAdjustments.computeColorMaps(e),o=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;o[t]=i.colorMap[e]+.5|0,o[t+1]=i.sMap[e]+i.hMap[e]-e+.5|0,o[t+2]=0,o[t+3]=255}for(let e=0;e<4;e++)i.cm.push(0);var a=new Uint8ClampedArray(1024);for(let e=0;e<256;e++){const t=4*e;a[t]=i.threeChannelColorMap[0][e],a[t+1]=i.threeChannelColorMap[1][e],a[t+2]=i.threeChannelColorMap[2][e],a[t+3]=255}const l=new PIXI.Container,h=n.default.getRGBADataAsSprite(1,256,o,l),c=n.default.getRGBADataAsSprite(1,256,a,l),d=i.cm;super(null,"\nprecision highp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\nuniform sampler2D u_colorShadowsHighlightsSampler;\nuniform sampler2D u_threeChannelColorMapSampler;\nuniform mat4 u_colorMatrix;\n\nvoid main(void) {\n    vec4 color = texture2D(inputImageTexture, vTextureCoord);\n\n    color.r = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.r)).r;\n    color.g = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.g)).r;\n    color.b = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, color.b)).r;\n\n    float intensity = 0.3 * color.r + 0.59 * color.g + 0.11 * color.b;\n\n    float shDiff = texture2D(u_colorShadowsHighlightsSampler, vec2(0.0, intensity)).g - intensity;\n\n    color.rgb += shDiff;\n\n    color.rgb = clamp(color.rgb, 0.0, 1.0);\n\n    vec4 colorMatrixRGB = vec4(color.rgb, 1.0);\n\n    colorMatrixRGB = colorMatrixRGB * u_colorMatrix;\n\n    colorMatrixRGB = clamp(colorMatrixRGB, 0.0, 1.0);\n\n    colorMatrixRGB.r = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.r)).r;\n    colorMatrixRGB.g = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.g)).g;\n    colorMatrixRGB.b = texture2D(u_threeChannelColorMapSampler, vec2(0.0, colorMatrixRGB.b)).b;\n\n    gl_FragColor = vec4(\n        colorMatrixRGB.r * color.a,\n        colorMatrixRGB.g * color.a,\n        colorMatrixRGB.b * color.a,\n        color.a\n    );\n}\n",{u_colorShadowsHighlightsSampler:{type:"sampler2D",value:h.texture},u_threeChannelColorMapSampler:{type:"sampler2D",value:c.texture},u_colorMatrix:{type:"mat4",value:new Float32Array(d)}}),this.resolution=t,this.container=l,this.shadowHighlightSprite=h,this.threeChannelSprite=c,s.default.instance.addContainer(l)}destroy(){s.default.instance.releaseContainer(this.container),this.shadowHighlightSprite=null,this.threeChannelSprite=null,this.container=null}}t.default=o},Lkow:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=t.PixiJSApp=void 0,i("kSzJ");const r=i("xGui");t.PixiJSApp=r;const n=i("Ovj2");Object.defineProperty(t,"PixiJSRenderer",{enumerable:!0,get:function(){return n.PixiJSRenderer}})},NG98:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk");class n extends PIXI.Filter{constructor(e=r.SolidColor.ZERO,t=r.SolidColor.ZERO,i=r.SolidColor.ZERO,n=1,s=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\n\n// These must be premultiplied alpha!\nuniform vec4 redColor;\nuniform vec4 greenColor;\nuniform vec4 blueColor;\n\nuniform float alpha;\n\nvoid main()\n{\n\tlowp vec4 tex = texture2D(inputImageTexture, vTextureCoord);\n\t\n\t// The color multiplication is applied as a weighted average\n\t// of the r/g/b channel artwork, to accommodate any AA against\n\t// the background or between channels.\n\tfloat sum = tex.r + tex.g + tex.b;\n\tif (sum > 0.0) {\n\t\tgl_FragColor = (redColor * tex.r / sum\n\t\t\t+ greenColor * tex.g / sum\n\t\t\t+ blueColor * tex.b / sum) * tex.a * alpha;\n\t}\n}\n",{redColor:{type:"vec4",value:new Float32Array(e.asArrayPremultipliedAlpha)},greenColor:{type:"vec4",value:new Float32Array(t.asArrayPremultipliedAlpha)},blueColor:{type:"vec4",value:new Float32Array(i.asArrayPremultipliedAlpha)},alpha:{type:"float",value:n}}),this.resolution=s}set redChannelArtworkColor(e){this.uniforms.redColor=new Float32Array(e.asArrayPremultipliedAlpha)}set greenChannelArtworkColor(e){this.uniforms.greenColor=new Float32Array(e.asArrayPremultipliedAlpha)}set blueChannelArtworkColor(e){this.uniforms.blueColor=new Float32Array(e.asArrayPremultipliedAlpha)}set alpha(e){this.uniforms.alpha=e}}t.default=n},Nvgk:function(e,t,i){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./",i(i.s=0)}([function(e,t,i){"use strict";function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}e.exports=function(e,t){var i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter((function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})))),n.forEach((function(t){r(e,t,i[t])}))}return e}({},{maxAttempts:5,delay:100},t);i.loggerFn&&(i.logger={info:function(e,t){i.loggerFn(t,e)}});var n=0;return function t(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return e.apply(void 0,s).catch((function(r){if(n++,i.hasOwnProperty("counter_cb")&&"function"==typeof i.counter_cb&&i.counter_cb(n),n===i.maxAttempts)return Promise.reject(r);if("function"==typeof i.shouldRetry&&!i.shouldRetry.apply(i,[r].concat(s)))throw r;var o,a=Math.floor(Math.pow(2,n-1)*i.delay*(Math.random()+1));if(i.logger){var l=i.logMessagePrefix||e.name,h="".concat(l," failed ").concat(n," times, will try again in ").concat(a,"ms");i.logger.info(r,h)}return(o=a,new Promise((function(e){setTimeout(e,o)}))).then((function(){return t.apply(void 0,s)}))}))}}}])},Ovj2:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiJSRenderer=void 0;const r=i("xGui"),n=i("Xw6L");r.Text.TextTextureInstance=r.TextTexture.getInstance({useImagesForEmojis:!1});class s extends r.PixiRenderer{constructor(e){super(new n.PixiWebHost,e)}}t.PixiJSRenderer=s},RyLA:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("0gjg");t.default=class{constructor(e,t){this.ctx=e,this.colorTable=t,this.filled=!1,this.ctx.beginPath()}beginGroup(){}endGroup(){}beginClipGroup(e){}endClipGroup(){}fill(e,t){}stroke(e,t,i){this.ctx.lineWidth=i,t=t||this.colorTable.color(e),this.ctx.strokeStyle=r.default.toCSS(r.default.solidColor2Rgba(t)),this.ctx.stroke()}rectangle(e,t,i,r){this.ctx.rect(e,t,i-e,r-t)}ellipse(e,t,i,r){var n=i-e,s=r-t,o=n/2*.5522848,a=s/2*.5522848,l=e+n/2,h=t+s/2;this.ctx.moveTo(e,h),this.ctx.bezierCurveTo(e,h-a,l-o,t,l,t),this.ctx.bezierCurveTo(l+o,t,i,h-a,i,h),this.ctx.bezierCurveTo(i,h+a,l+o,r,l,r),this.ctx.bezierCurveTo(l-o,r,e,h+a,e,h),this.ctx.closePath()}newPath(e,t,i,r,n){this.ctx.beginPath(),this.fillRule=e,this.endCap=t,this.join=i,this.strokeWt=r,this.miterLimit=n}moveTo(e,t){this.ctx.moveTo(e,t)}lineTo(e,t){this.ctx.lineTo(e,t)}cubicBezier(e,t,i,r,n,s){this.ctx.bezierCurveTo(e,t,i,r,n,s)}quadraticBezier(e,t,i,r){this.ctx.quadraticCurveTo(e,t,i,r)}closePath(){this.ctx.closePath()}done(){}}},VpTX:function(e,t,i){"use strict";t.a=i.p+"9cd7b2018c617e440bd24118890155e0.wasm"},W4vr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},X4BD:function(module,__webpack_exports__,__webpack_require__){"use strict";var Module=function(){var _scriptDir="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0;return function(Module){var b,h,l;Module=Module||{},b||(b=void 0!==Module?Module:{}),b.ready=new Promise((function(e,t){h=e,l=t}));var m={},n;for(n in b)b.hasOwnProperty(n)&&(m[n]=b[n]);function p(e,t){throw t}var q="",r;q=self.location.href,_scriptDir&&(q=_scriptDir),q=0!==q.indexOf("blob:")?q.substr(0,q.lastIndexOf("/")+1):"",r=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)};var u=b.printErr||console.warn.bind(console),v,noExitRuntime;for(n in m)m.hasOwnProperty(n)&&(b[n]=m[n]);m=null,b.quit&&(p=b.quit),b.wasmBinary&&(v=b.wasmBinary),b.noExitRuntime&&(noExitRuntime=b.noExitRuntime),"object"!=typeof WebAssembly&&w("no native wasm support detected");var x,y=!1,D="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,E;function aa(e){if(e){for(var t=E,i=e+NaN,r=e;t[r]&&!(r>=i);)++r;if(16<r-e&&t.subarray&&D)e=D.decode(t.subarray(e,r));else{for(i="";e<r;){var n=t[e++];if(128&n){var s=63&t[e++];if(192==(224&n))i+=String.fromCharCode((31&n)<<6|s);else{var o=63&t[e++];65536>(n=224==(240&n)?(15&n)<<12|s<<6|o:(7&n)<<18|s<<12|o<<6|63&t[e++])?i+=String.fromCharCode(n):(n-=65536,i+=String.fromCharCode(55296|n>>10,56320|1023&n))}}else i+=String.fromCharCode(n)}e=i}}else e="";return e}function F(){var e=x.buffer;b.HEAP8=new Int8Array(e),b.HEAP16=new Int16Array(e),b.HEAP32=new Int32Array(e),b.HEAPU8=E=new Uint8Array(e),b.HEAPU16=new Uint16Array(e),b.HEAPU32=new Uint32Array(e),b.HEAPF32=new Float32Array(e),b.HEAPF64=new Float64Array(e)}function G(e){for(;0<e.length;){var t=e.shift();if("function"==typeof t)t(b);else{var i=t.h;"number"==typeof i?void 0===t.f?b.dynCall_v(i):b.dynCall_vi(i,t.f):i(void 0===t.f?null:t.f)}}}var H=[],I=[],ba=[],ca=[],J=[];function da(){var e=b.preRun.shift();H.unshift(e)}var K=0,L=null,M=null;function w(e){throw b.onAbort&&b.onAbort(e),u(e),y=!0,e=new WebAssembly.RuntimeError("abort("+e+"). Build with -s ASSERTIONS=1 for more info."),l(e),e}function N(){var e=O;return String.prototype.startsWith?e.startsWith("data:application/octet-stream;base64,"):0===e.indexOf("data:application/octet-stream;base64,")}b.preloadedImages={},b.preloadedAudios={};var O="index.wasm";if(!N()){var P=O;O=b.locateFile?b.locateFile(P,q):q+P}function Q(){try{if(v)return new Uint8Array(v);if(r)return r(O);throw"both async and sync fetching of the wasm failed"}catch(e){w(e)}}function ea(){return v||"function"!=typeof fetch?new Promise((function(e){e(Q())})):fetch(O,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+O+"'";return e.arrayBuffer()})).catch((function(){return Q()}))}I.push();var S={emscripten_notify_memory_growth:function(){F()},emscripten_run_script:function(a){eval(aa(a))},proc_exit:function(e){R(e)}};!function(){function e(e){e=e.exports,b.asm=e,x=e.memory,F(),K--,b.monitorRunDependencies&&b.monitorRunDependencies(K),0==K&&(null!==L&&(clearInterval(L),L=null),M&&(e=M,M=null,e()))}function t(t){e(t.instance)}function i(e){return ea().then((function(e){return WebAssembly.instantiate(e,r)})).then(e,(function(e){u("failed to asynchronously prepare wasm: "+e),w(e)}))}var r={env:S,wasi_snapshot_preview1:S};if(K++,b.monitorRunDependencies&&b.monitorRunDependencies(K),b.instantiateWasm)try{return b.instantiateWasm(r,e)}catch(e){return u("Module.instantiateWasm callback failed with error: "+e),!1}(function(){if(v||"function"!=typeof WebAssembly.instantiateStreaming||N()||"function"!=typeof fetch)return i(t);fetch(O,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,r).then(t,(function(e){return u("wasm streaming compile failed: "+e),u("falling back to ArrayBuffer instantiation"),i(t)}))}))})()}(),b.___em_js__array_bounds_check_error=function(){return(b.___em_js__array_bounds_check_error=b.asm.__em_js__array_bounds_check_error).apply(null,arguments)};var fa=b._emscripten_bind_VoidPtr___destroy___0=function(){return(fa=b._emscripten_bind_VoidPtr___destroy___0=b.asm.emscripten_bind_VoidPtr___destroy___0).apply(null,arguments)},ha=b._emscripten_bind_Draw_Draw_4=function(){return(ha=b._emscripten_bind_Draw_Draw_4=b.asm.emscripten_bind_Draw_Draw_4).apply(null,arguments)};b._malloc=function(){return(b._malloc=b.asm.malloc).apply(null,arguments)};var ia=b._emscripten_bind_Draw_enableDebugging_1=function(){return(ia=b._emscripten_bind_Draw_enableDebugging_1=b.asm.emscripten_bind_Draw_enableDebugging_1).apply(null,arguments)},ja=b._emscripten_bind_Draw_start_12=function(){return(ja=b._emscripten_bind_Draw_start_12=b.asm.emscripten_bind_Draw_start_12).apply(null,arguments)},ka=b._emscripten_bind_Draw_markTo_7=function(){return(ka=b._emscripten_bind_Draw_markTo_7=b.asm.emscripten_bind_Draw_markTo_7).apply(null,arguments)},la=b._emscripten_bind_Draw_repeat_5=function(){return(la=b._emscripten_bind_Draw_repeat_5=b.asm.emscripten_bind_Draw_repeat_5).apply(null,arguments)},ma=b._emscripten_bind_Draw_resetCanvas_0=function(){return(ma=b._emscripten_bind_Draw_resetCanvas_0=b.asm.emscripten_bind_Draw_resetCanvas_0).apply(null,arguments)},na=b._emscripten_bind_Draw_setPaintProps_5=function(){return(na=b._emscripten_bind_Draw_setPaintProps_5=b.asm.emscripten_bind_Draw_setPaintProps_5).apply(null,arguments)},oa=b._emscripten_bind_Draw_getImageBuffer_0=function(){return(oa=b._emscripten_bind_Draw_getImageBuffer_0=b.asm.emscripten_bind_Draw_getImageBuffer_0).apply(null,arguments)},pa=b._emscripten_bind_Draw_loadBrush_3=function(){return(pa=b._emscripten_bind_Draw_loadBrush_3=b.asm.emscripten_bind_Draw_loadBrush_3).apply(null,arguments)},qa=b._emscripten_bind_Draw_get_imageBufferSize_0=function(){return(qa=b._emscripten_bind_Draw_get_imageBufferSize_0=b.asm.emscripten_bind_Draw_get_imageBufferSize_0).apply(null,arguments)},ra=b._emscripten_bind_Draw___destroy___0=function(){return(ra=b._emscripten_bind_Draw___destroy___0=b.asm.emscripten_bind_Draw___destroy___0).apply(null,arguments)},T;function sa(e){this.name="ExitStatus",this.message="Program terminated with exit("+e+")",this.status=e}function U(){function e(){if(!T&&(T=!0,b.calledRun=!0,!y)){if(G(I),G(ba),h(b),b.onRuntimeInitialized&&b.onRuntimeInitialized(),ua){var e=b.__initialize;try{e(),R(0,!0)}catch(t){t instanceof sa||("unwind"==t?noExitRuntime=!0:((e=t)&&"object"==typeof t&&t.stack&&(e=[t,t.stack]),u("exception thrown: "+e),p(1,t)))}}if(b.postRun)for("function"==typeof b.postRun&&(b.postRun=[b.postRun]);b.postRun.length;)e=b.postRun.shift(),J.unshift(e);G(J)}}if(!(0<K)){if(b.preRun)for("function"==typeof b.preRun&&(b.preRun=[b.preRun]);b.preRun.length;)da();G(H),0<K||(b.setStatus?(b.setStatus("Running..."),setTimeout((function(){setTimeout((function(){b.setStatus("")}),1),e()}),1)):e())}}function R(e,t){t&&noExitRuntime&&0===e||(!noExitRuntime&&(y=!0,G(ca),b.onExit)&&b.onExit(e),p(e,new sa(e)))}if(b._free=function(){return(b._free=b.asm.free).apply(null,arguments)},b.__initialize=function(){return(b.__initialize=b.asm._initialize).apply(null,arguments)},M=function e(){T||U(),T||(M=e)},b.run=U,b.preInit)for("function"==typeof b.preInit&&(b.preInit=[b.preInit]);0<b.preInit.length;)b.preInit.pop()();var ua=!0;function V(){}function W(e){return(e||V).c}function X(e,t){var i=W(t),r=i[e];return r||((r=Object.create((t||V).prototype)).a=e,i[e]=r)}function Y(){throw"cannot construct a VoidPtr, no constructor in IDL"}function Z(e,t,i,r){e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),r&&"object"==typeof r&&(r=r.a),this.a=ha(e,t,i,r),W(Z)[this.a]=this}return b.noInitialRun&&(ua=!1),U(),V.prototype=Object.create(V.prototype),V.prototype.constructor=V,V.prototype.b=V,V.c={},b.WrapperObject=V,b.getCache=W,b.wrapPointer=X,b.castObject=function(e,t){return X(e.a,t)},b.NULL=X(0),b.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete W(e.b)[e.a]},b.compare=function(e,t){return e.a===t.a},b.getPointer=function(e){return e.a},b.getClass=function(e){return e.b},Y.prototype=Object.create(V.prototype),Y.prototype.constructor=Y,Y.prototype.b=Y,Y.c={},b.VoidPtr=Y,Y.prototype.__destroy__=function(){fa(this.a)},Z.prototype=Object.create(V.prototype),Z.prototype.constructor=Z,Z.prototype.b=Z,Z.c={},b.Draw=Z,Z.prototype.enableDebugging=function(e){var t=this.a;e&&"object"==typeof e&&(e=e.a),ia(t,e)},Z.prototype.start=Z.prototype.start=function(e,t,i,r,n,s,o,a,l,h,c,d){var u=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),r&&"object"==typeof r&&(r=r.a),n&&"object"==typeof n&&(n=n.a),s&&"object"==typeof s&&(s=s.a),o&&"object"==typeof o&&(o=o.a),a&&"object"==typeof a&&(a=a.a),l&&"object"==typeof l&&(l=l.a),h&&"object"==typeof h&&(h=h.a),c&&"object"==typeof c&&(c=c.a),d&&"object"==typeof d&&(d=d.a),!!ja(u,e,t,i,r,n,s,o,a,l,h,c,d)},Z.prototype.markTo=function(e,t,i,r,n,s,o){var a=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),r&&"object"==typeof r&&(r=r.a),n&&"object"==typeof n&&(n=n.a),s&&"object"==typeof s&&(s=s.a),o&&"object"==typeof o&&(o=o.a),!!ka(a,e,t,i,r,n,s,o)},Z.prototype.repeat=Z.prototype.repeat=function(e,t,i,r,n){var s=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),r&&"object"==typeof r&&(r=r.a),n&&"object"==typeof n&&(n=n.a),!!la(s,e,t,i,r,n)},Z.prototype.resetCanvas=function(){return!!ma(this.a)},Z.prototype.setPaintProps=function(e,t,i,r,n){var s=this.a;return e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),r&&"object"==typeof r&&(r=r.a),n&&"object"==typeof n&&(n=n.a),!!na(s,e,t,i,r,n)},Z.prototype.getImageBuffer=function(){return oa(this.a)},Z.prototype.loadBrush=function(e,t,i){var r=this.a;e&&"object"==typeof e&&(e=e.a),t&&"object"==typeof t&&(t=t.a),i&&"object"==typeof i&&(i=i.a),pa(r,e,t,i)},Z.prototype.get_imageBufferSize=Z.prototype.g=function(){return qa(this.a)},Object.defineProperty(Z.prototype,"imageBufferSize",{get:Z.prototype.g}),Z.prototype.__destroy__=function(){ra(this.a)},Module.ready}}();__webpack_exports__.a=Module},Xw6L:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebHost=void 0;const r=i("jsS/");t.PixiWebHost=class{constructor(){}createPixiApp(e){return new r.PixiWebApplication(e)}}},bNrw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextTexture=void 0;const r=i("UzQk"),n=i("Em2v"),s=i("0gjg"),o=[1,0,0,1,0,0];function a(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}class l{constructor(e){var t;if(this.width=1,this.height=1,this.tracking=0,this.fontSize=0,this.strokeWidth=0,this.fillColor="rgba(0, 0, 0, 1)",this.strokeColor="rgba(0, 0, 0, 0)",this.text="",this.font="",this.transform=o,this.isPowerOfTwo=!0,this.renderRuns=r.PGMRenderRuns.EMPTY,this.resetCanvas(),this.useImagesForEmojis=!!e&&(null!==(t=e.useImagesForEmojis)&&void 0!==t&&t),this.useImagesForEmojis){if(!e.emojisManager)throw new Error("emojisManager is required if useImagesForEmojis is true");this.emojisManager=e.emojisManager}}static getInstance(e){return l.instance||(l.instance=new l(e)),l.instance}resetCanvas(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=10,this.canvas.height=10,this.context.textAlign="left",this.context.textBaseline="alphabetic"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setSize(e,t){return this.width=Math.ceil(e),this.height=Math.ceil(t),this}setTransform(e){return this.transform=e,this}setText(e){return this.text=e,this}setTracking(e){return this.tracking=e||0,this}setFontSize(e){return this.fontSize=e,this}setFont(e){return this.font=e,this}setFillColor(e){return this.fillColor=e,this}setStrokeColor(e){return this.strokeColor=e,this}setStrokeWidth(e){return this.strokeWidth=e,this}setRenderRuns(e){return this.renderRuns=e,this}getCanvas(){return this.canvas}disable(){return this.canvas.width=1,this.canvas.height=1,this}destroy(){return this.canvas=null,this.context=null,this}getNextPosition(e,t,i){let r=0,s=e[t];if(t<e.length-1){let o=e[t+1],a=this.context.measureText(o).width;if(n.EmojiUtils.isEmoji(o)&&(a=this.fontSize),i)r-=a,r-=this.tracking*this.fontSize;else{let e,t,i=0;if(n.EmojiUtils.isEmoji(s)||n.EmojiUtils.isEmoji(o)){let e=this.context.measureText(s).width;n.EmojiUtils.isEmoji(s)&&(e=this.fontSize),t=e}else e=s+o,i=this.context.measureText(e).width,t=i-a;r+=t,r+=this.tracking*this.fontSize}}return r}fillTextWithEffects(e,t,i){this.strokeWidth?(this.context.strokeText(e,t,i),this.fillColor?this.context.fillText(e,t,i):(this.context.globalAlpha=1,this.context.globalCompositeOperation="destination-out",this.context.fillText(e,t,i),this.context.globalCompositeOperation="source-over")):this.context.fillText(e,t,i)}drawSegment(e,t,i,r,n,s){let o=n;const a=e.slice(t,i).join("");if(r){const t=e.slice(0,i).join("");o-=this.context.measureText(t).width}else if(0!=t){const i=e.slice(0,t).join(""),r=this.context.measureText(i).width;o+=r;const n=this.context.measureText(a).width;let s=i+a;o+=this.context.measureText(s).width-(r+n)}this.fillTextWithEffects(a,o,s)}solidColorToHex(e){const t=Math.round(255*e.alpha).toString(16),i=1===t.length?"0"+t:t;return"#"+s.default.rgb2hex(e)+i}render(){const e=this.width>1024,t=this.height>1024;this.isPowerOfTwo=!e&&!t,this.canvas.width=e?this.width:a(this.width),this.canvas.height=t?this.height:a(this.height),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform),this.context.font=this.font,this.fillColor&&(this.context.fillStyle=this.fillColor),this.strokeColor&&(this.context.strokeStyle=this.strokeColor),this.strokeWidth&&(this.context.lineWidth=this.strokeWidth,this.strokeWidth/this.fontSize>r.PGMTextStyle.ROUNDED_CORNER_THRESHOLD&&(this.context.lineJoin="round"),this.strokeWidth/this.fontSize>.02?this.context.miterLimit=2:this.strokeWidth>.01&&(this.context.miterLimit=5));let i=0,s=0,o=this.renderRuns.fillColors.runArrays;const l=r.GraphemeUtils.splitGraphemes(this.text),h=n.EmojiUtils.hasEmoji(l),c=0!==this.tracking||this.useImagesForEmojis&&h;if(c||0!==o.length){let e=0,t=0;const a=""==this.text.charAt(0);if(a){i=this.context.measureText(this.text).width+this.fontSize*this.tracking*(l.length-1),c&&(i-=this.context.measureText(l[0]).width),t=i}if(c&&0===o.length){const e=new r.SolidColorRuns;e.apply(r.SolidColor.BLACK,new r.TextRange(0,l.length)),o=e.runArrays}for(var d=0;d<o.length;d++){const r=o[d];if(r.attr.alpha>0){if(this.renderRuns.fillColors.runArrays.length>0&&(this.context.fillStyle=this.solidColorToHex(r.attr),this.context.strokeStyle=this.solidColorToHex(this.renderRuns.strokeColors.runArrays[d].attr)),c){const o=l.slice(r.range.start,Math.min(r.range.end,l.length));if(e!=r.range.start){e>r.range.start&&(i=t,s=0,e=0);for(var u=e;u<r.range.start;u++)i+=this.getNextPosition(l,u,a),e+=1}let h=0;for(;h<o.length;){let t=o[h];if(this.useImagesForEmojis&&n.EmojiUtils.isEmoji(t)){this.emojisManager.getImageForEmoji(t)&&this.context.drawImage(this.emojisManager.getImageForEmoji(t),i,s-this.fontSize,this.fontSize,this.fontSize),i+=this.getNextPosition(l,e,a),e+=1,h+=1}else if(0===this.tracking){let r=h+1,c=t;for(;r<o.length&&!n.EmojiUtils.isEmoji(o[r]);)c+=o[r],r++;this.fillTextWithEffects(c,i,s);for(var p=h;p<r;p++)i+=this.getNextPosition(l,e,a),e+=1;h=r}else this.fillTextWithEffects(t,i,s),i+=this.getNextPosition(l,e,a),e+=1,h+=1}}else{let e=r.range.end;e>l.length&&l.length,this.drawSegment(l,r.range.start,e,a,t,s)}this.context.fillStyle=this.fillColor,this.context.strokeStyle=this.strokeColor}}}else this.fillTextWithEffects(this.text,i,s);return this}}t.TextTexture=l},d1kN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r=1){super(null,"\nprecision lowp float;\n\n// Texture coord provided by vertex shader\nvarying vec2 vTextureCoord;\n\n// Artwork sampler, contents provided by PIXI\nuniform sampler2D uSampler;\n\n// Mask sampler, matrix, and matte color (the color to use on transparent pixels)\nuniform sampler2D maskSampler;\nuniform mat3 maskMatrix;\nuniform vec4 matteColor;\n\n// Standard weights for luminance calculcation.\n// See: https://stackoverflow.com/questions/596216/formula-to-determine-brightness-of-rgb-color\nconst highp vec3 W = vec3(0.2126, 0.7152, 0.0722);\n\nvoid main()\n{\n    lowp vec4 artwork = texture2D(uSampler, vTextureCoord);\n    lowp vec4 mask = texture2D(maskSampler, (maskMatrix * vec3(vTextureCoord, 1.0)).xy);\n\n    lowp vec3 maskWithMatte = mix(matteColor.rgb, mask.rgb, mask.a);\n    float luminance = dot(maskWithMatte, W);\n    gl_FragColor = artwork * luminance;\n}\n\n",{maskSampler:{type:"sampler2d",value:e},maskMatrix:{type:"mat3",value:null},matteColor:{type:"vec4",value:new Float32Array(i)}}),this.maskMatrix=new PIXI.Matrix,this.maskSprite=t,this.resolution=r}apply(e,t,i,r){this.uniforms.maskMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),e.applyFilter(this,t,i,r)}}t.default=r},eoxN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),n=i("xtw7"),s=i("0gjg"),o=i("lzL7"),a=i("UzQk"),l=i("NG98");class h extends r.default{constructor(e,t){super(e,t),this.transform=new PIXI.Transform,this.textureSharpness=1,this.shouldClipRenderToDocumentBounds=!1,this.padding=0,this.cssColor="#000000",this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=null,this.baseTexture=new PIXI.BaseTexture(h.sharedTextureSource.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite);const i=e;this._changeBounds(i.bounds),this._changeColor(i.color),this._changeStrokeColor(i.strokeColor),this._changePaths(i.paths),this._changeLegacyRender(i.legacyRender)}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,n=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,n)}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}changeBlendMode(e,t,i){this.colorizeFilter.blendMode=r.default.mapPGMBlendModeToPixi(i)}_changeBounds(e){}_changeColor(e){this.isDirtyFilter=!0,this.cssColor=s.default.rgba2css(e)}_changeStrokeColor(e){this.isDirtyFilter=!0}_changeLegacyRender(e){this.isDirtyFilter=!0}_changePaths(e){this.isDirtyRender=!0,this.padding=e.reduce((e,t)=>("none"===t.pathFillType&&t.pathStrokeWeight>0&&(e=Math.max(e,t.pathStrokeWeight/2)),e),0)}changeGlobalPlacement(e,t){this.isDirtyPlacement=!0,super.changeGlobalPlacement(e,t)}autoApplyAlphaFilter(){return!1}filter(){this.colorizeFilter||(this.colorizeFilter=new l.default),this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.colorizeFilter.redChannelArtworkColor=this.mimicNode.color,null!==this.mimicNode.strokeColor&&(this.colorizeFilter.greenChannelArtworkColor=this.mimicNode.strokeColor),this.colorizeFilter.alpha=this.opacity,this.colorizeFilter.blendMode=this.pixiBlendMode,this.filters.push(this.colorizeFilter),super.filter()}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case a.PGMMimicShapeNode.PROP_BOUNDS:this._changeBounds(i.bounds);break;case a.PGMMimicShapeNode.PROP_COLOR:this._changeColor(i.color);break;case a.PGMMimicShapeNode.PROP_STROKE_COLOR:this._changeStrokeColor(i.strokeColor);break;case a.PGMMimicShapeNode.PROP_PATHS:this._changePaths(i.paths);break;case a.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`shape is ignoring property '${e}' change notice`)}})}validate(){const e=this.mimicNode,t=this.asyncRenderer.activeRender.graph.bounds.area,i=r.default.areaOfBoundsAtDocumentScale(this.globalPlacement,e.bounds),n=e.ctm.asArray,s=o.default.decomposeScale(n),a=e.bounds.width*s.x,l=e.bounds.height*s.y;this.shouldClipRenderToDocumentBounds=t<i,this.shouldClipRenderToDocumentBounds?o.default.equal(this.globalTransform,n)||(this.isDirtyRender=!0):this.globalBoundsWidth===a&&this.globalBoundsHeight===l||(this.isDirtyRender=!0),this.globalBoundsWidth=a,this.globalBoundsHeight=l,this.globalTransform=n,super.validate()}place(){const e=o.default.decompose(this.localPlacement.asArray),t=e.position,i=e.rotation,r=e.scale,n=e.skew;this.shouldClipRenderToDocumentBounds?this.pixiDisplayObject.setTransform(t.x,t.y,r.x,r.y,i,n.x,n.y,0,0):this.pixiDisplayObject.setTransform(t.x,t.y,1,1,i,n.x,n.y,0,0),this.isDirtyPlacement=!1}renderShapeAtOwnBounds(){const e=this.mimicNode.bounds,t=this.renderScale,i=this.globalScale,r=this.localScale,n=e.minX,s=e.minY,o=this.padding,a=i.x,l=i.y,c=r.x,d=r.y,u=t*this.textureSharpness*this.pixiApp.renderer.resolution,p=u*a,m=u*l,f=(n-o)*c,g=(s-o)*d,x=c*(1/p),y=d*(1/m),b=e.width*p+o*p*2,v=e.height*m+o*m*2,T=[p,0,0,m,p*(o-n),m*(o-s)];h.sharedTextureSource.setSize(b,v).setTransform(T),this.sprite.setTransform(f,g,x,y,0,0,0,0,0)}renderShapeClippedToDocumentBounds(){const e=this.renderScale,t=this.asyncRenderer.activeRender.graph.bounds.width,i=this.asyncRenderer.activeRender.graph.bounds.height,r=e*this.textureSharpness*this.pixiApp.renderer.resolution,n=t*r,s=i*r,a=o.default.getScalingTransform(r,r),l=o.default.multiply([],a,this.globalPlacement.asArray),c=o.default.invert([],l);h.sharedTextureSource.setSize(n,s).setTransform(l);const d=o.default.decompose(c),u=d.position,p=d.rotation,m=d.scale,f=d.skew;this.sprite.setTransform(u.x,u.y,m.x,m.y,p,f.x,f.y,0,0)}render(){const e=this.mimicNode,t=this.baseTexture,i=this.texture;h.sharedTextureSource.begin(),this.shouldClipRenderToDocumentBounds?this.renderShapeClippedToDocumentBounds():this.renderShapeAtOwnBounds();let r=e.strokeColor?"#00FF00":null,n=e.legacyRender;h.sharedTextureSource.setColor("#FF0000").setStrokeColor(r).setLegacyRender(n).setPaths(e.paths).render().end(),t.realWidth=t.source.width,t.realHeight=t.source.height,t.width=t.realWidth/t.resolution,t.height=t.realHeight/t.resolution,t.isPowerOfTwo=h.sharedTextureSource.isPowerOfTwo,i._updateID++,i._frame.width=t.width,i._frame.height=t.height,this.pixiApp.renderer.textureManager.updateTexture(t),super.render()}destroy(e){this.sprite.destroy(),this.sprite=null,super.destroy(e)}}t.default=h,h.TYPE="shape",h.sharedTextureSource=new n.default},fziT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i,r=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float intensity;\nuniform vec3 firstColor;\nuniform vec3 secondColor;\n\nconst mediump vec3 luminanceWeighting = vec3(0.2125, 0.7154, 0.0721);\n\nvec4 duotone(vec4 colorIn) {\n    float luminance = dot(colorIn.rgb, luminanceWeighting);\n    lowp vec4 outputColor = vec4( mix(firstColor.rgb, secondColor.rgb, luminance), colorIn.a);\n    outputColor.r = outputColor.r * colorIn.a;\n    outputColor.g = outputColor.g * colorIn.a;\n    outputColor.b = outputColor.b * colorIn.a;\n    return vec4( mix(colorIn.rgb, outputColor.rgb, intensity), colorIn.a);\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = duotone(textureColor);\n}\n",{intensity:{type:"float",value:e},firstColor:{type:"vec3",value:new Float32Array(t)},secondColor:{type:"vec3",value:new Float32Array(i)}}),this.resolution=r}}t.default=r},hUdH:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("UzQk"),n=i("CkXF"),s=i("sodY"),o=i("vr9a");var a;!function(e){e.NEEDS_PRELOAD="needs_preload",e.PRELOADING="preloading",e.NEEDS_LOAD="needs_load",e.LOADING="loading",e.LOADED="loaded",e.NEEDS_RELOAD="needs_reload",e.RELOADING="reloading"}(a||(a={}));const l=[32,64,96,128,192,256,384,512,768,1024,1536,2048,3072,4096];class h extends n.default{constructor(e,t){super(e,t),this.scale=r.TheoPoint.INVALID,this.preloadResolution=64,this.imageSprite=null,this.currentUrl=null,this.preloadUrl=null,this.status=a.NEEDS_PRELOAD;const i=e;this.currentContentId=i.contentID,this.isBogusContent=!1,this.scale=i.ctm.extractedScale.scale,this.changeBounds(i.bounds),this.changeContent()}destroy(e){this.pendingRenders>0&&this.notifyAsyncRenderEnd(),this.imageSprite&&(this.imageSprite.destroy(),this.imageSprite=null),this.temporaryDataUrl&&(s.default.instance.releaseTexturesForUrl(this.temporaryDataUrl,this.currentContentId),this.temporaryDataUrl=null),super.destroy(e)}place(){if(this.isDestroyed||!this.imageSprite||!this.imageSprite.transform)return;const e=this.imageSprite&&this.imageSprite.texture;if(!e||!e.valid)return;if(this.asyncRenderer&&this.asyncRenderer.hints.isProducingVideo||!this.asyncRenderer||!this.asyncRenderer.hints.isAnimating||!this.isTransformAnimation()){const t=e.width,i=e.height,n=this.pixelWidth/t,s=this.pixelHeight/i,o=r.Matrix2D.scalingXY(this.renderScale,this.renderScale).concat(this.globalPlacement);let a=0,l=0,h=n,c=s;if(o.preservesBoxesNoSwap){const e=this.pixelWidth,t=this.pixelHeight,i=o.transformRect(r.TheoRect.fromXYWH(0,0,e,t)),n=i.snapped(),s=n.width/i.width,d=n.height/i.height;h*=s,c*=d;const u=o.inverse.extractedScale.scale;a=(n.minX-i.minX)*u.x,l=(n.minY-i.minY)*u.y}this.imageSprite.scale.x=h,this.imageSprite.scale.y=c,this.imageSprite.position.x=a,this.imageSprite.position.y=l}super.place()}isTransformAnimation(){return!this.mimicNode.getStaticCTM().equal(this.mimicNode.ctm)}handleTextureLoaded(e,t,i,r){if(this.temporaryDataUrl&&(s.default.instance.releaseTexturesForUrl(this.temporaryDataUrl,this.currentContentId),this.temporaryDataUrl=null),!this.isDestroyed){if(e)if(void 0!==this.currentRendition&&"original"!==this.currentRendition){console.warn("Pixi render image: Failed to load rendition, trying original");const e=this.mimicNode.contentID,t=this.asyncRenderer.activeRender,i={jpegOkIfNoAlpha:(t.target&&t.target.typeHint)!==o.TargetRenderTypeHint.ForFinalForm,explicitDimension:"original"},r=t.assetLoader.getURLforContentID(t.graph,e,i);r!==this.currentUrl&&(this.isDirtyRender=!0,this.currentUrl&&this.currentUrl.startsWith("data:")&&(this.temporaryDataUrl=this.currentUrl),this.currentUrl=r,this.currentRendition=i.explicitDimension,this.status=a.NEEDS_LOAD,this.bubble("image-not-loaded"))}else console.warn(`Pixi render image: Failed to load ${this.currentRendition||"unknown"} rendition. Failing.`);else this.imageSprite?this.imageSprite.texture=t:(this.imageSprite=new PIXI.Sprite(t),this.pixiDisplayObject.addChild(this.imageSprite)),this.place();this.emitLoaded(i),r?(this.status=a.NEEDS_LOAD,this.load()):this.status=a.LOADED}}emitLoaded(e){this.isDestroyed||(this.bubble("image-loaded"),e&&this.pendingRenders>0&&this.notifyAsyncRenderEnd())}get needsLoad(){return this.status===a.NEEDS_PRELOAD||this.status===a.NEEDS_LOAD||this.status===a.NEEDS_RELOAD}load(){this.bubble("image-loading");let e=this.currentUrl;this.status===a.NEEDS_PRELOAD?this.preloadUrl?(e=this.preloadUrl,this.status=a.PRELOADING):this.status=a.LOADING:this.status===a.NEEDS_LOAD?this.status=a.LOADING:this.status=a.RELOADING;const t=s.default.instance,i=this.asyncRenderer.activeRender.assetLoader,r=this.status===a.PRELOADING,n=this.status===a.LOADING||r;r&&"number"==typeof i.preloadResolution&&i.preloadResolution>0&&(this.preloadResolution=i.preloadResolution);const o=e.startsWith("data:")?this.currentContentId:void 0;t.load(e,(e,t)=>{this.handleTextureLoaded(e,t,n,r)},i,this.asyncRenderer.id,r,o)}render(){this.status!==a.NEEDS_PRELOAD&&this.status!==a.NEEDS_LOAD&&this.status!==a.LOADING||this.notifyAsyncRenderBegin(),this.isDirtyRender&&this.needsLoad&&this.load(),super.render()}changeBounds(e){this.pixelWidth=e.width||1,this.pixelHeight=e.height||1}changeContent(){this.preloadUrl=null,this.reloadMedia(!0)}calcOptimalResolution(){if(this.scale.equal(r.TheoPoint.INVALID))return;const e=this.pixelWidth*this.scale.x*this.renderScale,t=this.pixelHeight*this.scale.y*this.renderScale,i=Math.ceil(e),n=Math.ceil(t),s=Math.max(i,n);let o=l[0];for(const e of l){if(e===s){o=e;break}if(e>s){s-o>.1*o&&(o=e);break}o=e}return o>Math.max(this.pixelWidth,this.pixelHeight)&&(o="original"),o}reloadMedia(e){var t;const i=this.mimicNode.contentID;if(this.isBogusContent&&this.currentContentId===i)return;this.currentContentId=i;const r=this.asyncRenderer.activeRender,n=r.target&&r.target.typeHint,s={jpegOkIfNoAlpha:n!==o.TargetRenderTypeHint.ForFinalForm};if(this.asyncRenderer.hints.isAnimating?s.explicitDimension=this.currentRendition:s.explicitDimension=this.calcOptimalResolution(),n===o.TargetRenderTypeHint.ForScreen&&this.status===a.NEEDS_PRELOAD){const e={explicitDimension:null!==(t=r.assetLoader.preloadResolution)&&void 0!==t?t:64,jpegOkIfNoAlpha:!0};this.preloadUrl=r.assetLoader.getURLforContentID(r.graph,i,e)}this.isBogusContent=!r.graph.resources.byContentID(i);const l=r.assetLoader.getURLforContentID(r.graph,i,s);l!==this.currentUrl&&(this.isDirtyRender=!0,this.currentUrl&&this.currentUrl.startsWith("data:")&&(this.temporaryDataUrl=this.currentUrl),this.currentUrl=l,this.currentRendition=s.explicitDimension,this.imageSprite&&!e?this.status=a.NEEDS_RELOAD:this.preloadUrl?this.status=a.NEEDS_PRELOAD:this.status=a.NEEDS_LOAD,this.bubble("image-not-loaded"))}changeRenderScale(e,t){super.changeRenderScale(e,t),Math.abs(t-e)>1e-9&&this.reloadMedia(!0)}changeGlobalPlacement(e,t){if(super.changeGlobalPlacement(e,t),e.equal(t))console.warn("Unnecessary CTM update?? "+t.description);else{const e=t.extractedScale.scale;this.scale.x===e.x&&this.scale.y===e.y||(this.scale=e,this.reloadMedia(!1))}}changeProperties(e,t){const i=e;for(const e of t)switch(e){case r.PGMMimicMediaNode.PROP_BOUNDS:this.changeBounds(i.bounds);break;case r.PGMMimicMediaNode.PROP_CONTENT_ID:break;case r.PGMMimicMediaNode.PROP_CONTENT_RESOURCE:this.changeContent()}this.isDirtyRender=!0,super.changeProperties(e,t)}}t.default=h,h.TYPE="image"},hhcO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiLiveViewService=void 0;const r=i("xBmG"),n=i("vr9a"),s=i("H02z"),o=i("uzmb");class a{constructor(e,t){this.target=e,this.cbfn=t}cancel(){this.target.removeEventListener(this)}}class l{constructor(e,t){this.listeners=[],this.api=e,this.renderer=new s.PixiAnimationFrameRenderer({hostAPI:e.host,assetLoader:t,log:e.log,listener:this})}destroy(){this.renderer.destroy(),this.renderer=null}getCanvas(){return this.renderer.canvas}addEventListener(e){const t=new a(this,e);return this.listeners.push(t),t}removeEventListener(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}notify(e){this.listeners.forEach(t=>t.cbfn(e))}onFrameRender(e,t){this.notify(new r.LiveViewFrameRenderCompleteEvent(e,t))}onAnimationComplete(e){this.notify(new r.LiveViewAnimationRenderCompleteEvent(e))}onLoadingImagesBegin(){this.notify(new r.LiveViewLoadingImagesBeginEvent)}onLoadingImagesEnd(){this.notify(new r.LiveViewLoadingImagesEndEvent)}onTextureCachePrimed(){this.notify(new r.LiveViewTextureCachePrimedEvent)}setSize(e,t,i){i=i||1,this.renderer.setTargetParameters({transformType:n.TargetTransformTypeEnum.FitCentered,width:e*i,height:t*i,encoding:o.RawEncoding.AsBuffer(),typeHint:n.TargetRenderTypeHint.ForScreen})}render(e,t){this.renderer.render(e,t)}}t.PixiLiveViewService=class{constructor(e,t){this.api=e,this.assetLoader=t||e.defaultAssetLoader}createView(e){return new l(this.api,e||this.assetLoader)}}},hxFN:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t,i=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform mat4 colorMatrix;\nuniform vec4 colorBias;\n\nvec4 colorTransform(vec4 colorIn) {\n    return colorMatrix * colorIn + colorBias;\n}\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n    gl_FragColor = colorTransform(textureColor);\n}\n",{colorMatrix:{type:"mat4",value:new Float32Array(e)},colorBias:{type:"vec4",value:new Float32Array(t)}}),this.resolution=i}}t.default=r},"jsS/":function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.PixiWebApplication=void 0;const r=i("xGui");class n extends PIXI.Application{constructor(e){super(e)}setSize(e,t){this.view.width=e,this.view.height=t}render(){return new Promise((e,t)=>{this.renderer.once("postrender",()=>{e()}),this.renderer.render(this.stage)})}renderToImage(){return new Promise((t,i)=>{this.renderer.once("postrender",()=>{const i=this.view.width,n=this.view.height;let s;if(this.renderer instanceof PIXI.WebGLRenderer){const t=this.renderer.gl;s=e.alloc(i*n*4),t.readPixels(0,0,i,n,t.RGBA,t.UNSIGNED_BYTE,s),function(e,t,i){for(var r=0;r<i/2;r++){let s=r*t*4,o=(i-1-r)*t*4;for(var n=4*t;n>0;n--,s++,o++){let t=e[s];e[s]=e[o],e[o]=t}}}(s,i,n)}else{const t=this.renderer.rootContext.getImageData(0,0,i,n).data;s=e.from(t.buffer)}t({encoding:r.RawEncoding.AsBuffer(),data:s,width:i,height:n})}),this.renderer.render(this.stage)})}destroyAll(){this.destroy(!0,{children:!0,texture:!0,baseTexture:!0})}}t.PixiWebApplication=n}).call(this,i("HDXh").Buffer)},kQtw:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf");class n extends r.default{}t.default=n,n.TYPE="group"},lzL7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{static get defaultMatrix(){return[1,0,0,1,0,0]}static equal(e,t){return e&&t?e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]:!e==!t}static getScalingTransform(e,t){return[e,0,0,t,0,0]}static scale(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r*h,e[1]=n*h,e[2]=s*c,e[3]=o*c,e[4]=a,e[5]=l,e}static multiply(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1],d=i[2],u=i[3],p=i[4],m=i[5];return e[0]=r*h+s*c,e[1]=n*h+o*c,e[2]=r*d+s*u,e[3]=n*d+o*u,e[4]=r*p+s*m+a,e[5]=n*p+o*m+l,e}static transformPoint(e,t,i){return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}static translate(e,t,i){const r=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],h=i[0],c=i[1];return e[0]=r,e[1]=n,e[2]=s,e[3]=o,e[4]=r*h+s*c+a,e[5]=n*h+o*c+l,e}static invert(e,t){const i=t[0],r=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=i*s-r*n;return l?(l=1/l,e[0]=s*l,e[1]=-r*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*a-s*o)*l,e[5]=(r*o-i*a)*l,e):null}static decompose(e){const t=e[0],i=e[1],r=e[2],n=e[3],s=e[4],o=e[5],a=-Math.atan2(-r,n),l=Math.atan2(i,t),h=Math.abs(a+l),c=h<1e-5||Math.abs(2*Math.PI-h)<1e-5;return{skew:{x:c?0:a,y:c?0:l},scale:{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+n*n)},position:{x:s,y:o},rotation:c?l:0}}static decomposeScale(e){const t=e[0],i=e[1],r=e[2],n=e[3];return{x:Math.sqrt(t*t+i*i),y:Math.sqrt(r*r+n*n)}}}},p17C:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{}t.default=class{static getRGBADataAsSprite(e,t,i,n){const s=document.createElement("canvas");s.width=e,s.height=t;const o=s.getContext("2d"),a=o.getImageData(0,0,e,t);if(i.length!==a.data.length)throw new r;a.data.set(i),o.putImageData(a,0,0);const l=PIXI.Sprite.from(s);return n.addChild(l),l}}},pMCj:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e,t=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform vec3 filterColor;\n\nconst highp vec3 W = vec3(0.2125, 0.7154, 0.0721);\n\nvoid main()\n{\n\tlowp vec4 textureColor = texture2D(inputImageTexture, vTextureCoord);\n\t//float luminance = dot(textureColor.rgb, W);\n\n  gl_FragColor = vec4(\n\t\t(1.0 - ((1.0 - textureColor.r) * (1.0 - filterColor.r))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.g) * (1.0 - filterColor.g))) * textureColor.a,\n\t\t(1.0 - ((1.0 - textureColor.b) * (1.0 - filterColor.b))) * textureColor.a,\n\t\ttextureColor.a);\n}\n",{filterColor:{type:"vec3",value:new Float32Array(e)}}),this.resolution=t}}t.default=r},s96w:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends PIXI.Filter{constructor(e=1){super(null,"\nprecision lowp float;\n\nvarying highp vec2 vTextureCoord;\n\nuniform sampler2D inputImageTexture;\nuniform float uTextureFlipY;\n\nvoid main()\n{\n    lowp vec4 textureColor = texture2D(inputImageTexture, vec2(vTextureCoord.x, uTextureFlipY - vTextureCoord.y));\n\n    if (textureColor.a > 0.0 && textureColor.a < 1.0) {\n        gl_FragColor = vec4(textureColor.rgb / textureColor.a, textureColor.a);\n    } else {\n        gl_FragColor = textureColor;\n    }\n}\n",{uTextureFlipY:{type:"float",value:1}}),this.resolution=e}apply(e,t,i,r){this.uniforms.uTextureFlipY=t.sourceFrame.height/t.texture.height,super.apply(e,t,i,r)}}t.default=r},sodY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.isPreloading=!0,this.postPreloadRequests={},this.textureCache={},this.containerCache=new Set,this.deferredCallbacks={},this.listeners=[]}addListener(e){this.listeners.push(e)}removeListener(e){const t=this.listeners.indexOf(e);t>=0&&this.listeners.splice(t,1)}preloadingHasCompleted(){if(this.isPreloading){this.isPreloading=!1;let e=0;const t=this.listeners.slice();Object.entries(this.postPreloadRequests).forEach(([i,r])=>{delete this.postPreloadRequests[i],r.forEach(r=>{e+=1;this.load(i,(i,n)=>{r.callback(i,n),e>0&&(e-=1,0===e&&t.forEach(e=>{e.onCachePrimed()}))},r.assetLoader,r.rendererId,!1)})}),0===e&&t.forEach(e=>{e.onCachePrimed()})}}load(e,t,i,r,n,s){const o=this.textureCache[e];if(o&&(o.renderReferences.add(r),void 0!==s&&(o.assetReferences||(o.assetReferences=new Set),o.assetReferences.add(s)),o.texture&&o.texture.frame))return void t(null,o.texture);if(this.deferredCallbacks[e])return void this.deferredCallbacks[e].push(t);if(!n&&this.isPreloading){const n={callback:t,rendererId:r,assetLoader:i};let s=this.postPreloadRequests[e];return void(s?s.push(n):this.postPreloadRequests[e]=[n])}this.deferredCallbacks[e]=[t];const a=i.hostImageLoader;if(a&&a.shouldLoadImageForUrl(e))return void a.load(e).then(t=>{const i=PIXI.Texture.fromLoader(t,e),n=void 0!==s?new Set([s]):void 0;this.textureCache[e]={texture:i,assetReferences:n,renderReferences:new Set([r])},this.deferredCallbacks[e].forEach(e=>{e(null,i)}),delete this.deferredCallbacks[e]}).catch(t=>{this.deferredCallbacks[e].forEach(e=>{e(t,null)}),delete this.deferredCallbacks[e]});const l=new PIXI.loaders.Loader;i.loaderPlugins&&i.loaderPlugins.forEach(e=>{e.pre&&l.pre(e.pre.bind(e)),e.use&&l.use(e.use.bind(e))}),l.add({url:e,xhrType:"blob"}).load(()=>{const t=l.resources[e].texture,i=void 0!==s?new Set([s]):void 0;this.textureCache[e]={texture:t,assetReferences:i,renderReferences:new Set([r])},this.deferredCallbacks[e].forEach(e=>{e(null,t)}),delete this.deferredCallbacks[e],l.reset()}).on("error",t=>{this.deferredCallbacks[e].forEach(e=>{e(t,null)}),delete this.deferredCallbacks[e]})}releaseTexturesForUrl(e,t){const i=this.textureCache[e];if(i){if(i.assetReferences&&(i.assetReferences.delete(t),i.assetReferences.size>0))return;i.texture&&(i.texture.destroy(!0),i.texture=null),delete this.textureCache[e]}}addContainer(e){this.containerCache.add(e)}releaseContainer(e){this.containerCache.delete(e),e.destroy({children:!0,texture:!0,baseTexture:!0})}reset(e){for(const e of this.containerCache)e.destroy({children:!0,texture:!0,baseTexture:!0});this.containerCache=new Set;for(const t in this.textureCache)this.textureCache[t].renderReferences.delete(e),0===this.textureCache[t].renderReferences.size&&(this.textureCache[t].texture&&this.textureCache[t].texture.destroy(!0),delete this.textureCache[t]);this.isPreloading=!0}resetLoadingState(){this.isPreloading=!0}}t.default=r,r.instance=new r},uzmb:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.JPGEncoding=t.PNGEncoding=t.RawEncoding=t.ImageEncoding=t.ImageBinaryEncodingEnum=void 0,function(e){e.Uint8Array="uint8array",e.Buffer="buffer",e.DataURL="data-url"}(r=t.ImageBinaryEncodingEnum||(t.ImageBinaryEncodingEnum={}));class n{constructor(e){this.binaryEncoding=e}}t.ImageEncoding=n;class s extends n{static AsBuffer(){return s.AS_BUFFER}static AsUint8Array(){return s.AS_UINT8ARRAY}}t.RawEncoding=s,s.AS_BUFFER=new s(r.Buffer),s.AS_UINT8ARRAY=new s(r.Uint8Array);class o extends n{static AsBuffer(){return o.AS_BUFFER}static AsUint8Array(){return o.AS_UINT8ARRAY}static AsDataURL(){return o.AS_DATA_URL}}t.PNGEncoding=o,o.AS_BUFFER=new o(r.Buffer),o.AS_UINT8ARRAY=new o(r.Uint8Array),o.AS_DATA_URL=new o(r.DataURL);class a extends n{constructor(e,t){super(e),this.quality=t}static AsBuffer(e){return new a(r.Buffer,e)}static AsUint8Array(e){return new a(r.Uint8Array,e)}static AsDataURL(e){return new a(r.DataURL,e)}}t.JPGEncoding=a},vDtG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("/Amf"),n=i("UzQk"),s=i("xtw7");class o extends r.default{constructor(e,t){super(e,t),this.height=1,this.width=1,this.clipType="rect",this.x=0,this.y=0,this.maskSprite=null,this.maskSpriteTexture=null,this.maskSpriteBaseTexture=null,this.maskGraphics=null,this.maskTransform=new PIXI.Transform;const i=e;this._changePaths(i.paths)}destroy(e){this.teardownMaskGraphics(),this.teardownMaskSprite(),super.destroy(e)}render(){const e=this.mimicNode,t=e.paths,i="rect"===this.clipType,r="ellipse"===this.clipType;let n=!1;if(i){const t=this.asyncRenderer.activeRender.graph.bounds.transform(e.ctm.inverse);n=e.ref.child.clipBounds.contains(t)}if(n)this.teardownMaskGraphics(),this.teardownMaskSprite();else if(r){const e=this.installMaskGraphics();e.clear(),e.beginFill(0),e.drawEllipse(this.x,this.y,this.width,this.height)}else{const r=e.ref.child.clipBounds,n=this.globalScale,s=this.renderScale*this.pixiApp.renderer.resolution,a=s*n.x,l=s*n.y;let h=r.width,c=r.height;i&&(r.minX>0||r.minY>0)&&(h+=r.minX,c+=r.minY);const d=h*a,u=c*l,p=[a,0,0,l,0,0],m=e=>Math.pow(2,Math.ceil(Math.log(e)/Math.LN2));this.maskSprite&&this.maskSprite.texture&&(m(d)!=this.maskSprite.texture.width||m(u)!==this.maskSprite.texture.height)&&this.teardownMaskSprite(),this.installMaskSprite();const f=this.maskSpriteBaseTexture,g=this.maskSpriteTexture;o.sharedTextureSource.begin().setSize(d,u).setTransform(p).setColor("white").setPaths(t).render().end(),f.realWidth=f.source.width,f.realHeight=f.source.height,f.width=f.realWidth/f.resolution,f.height=f.realHeight/f.resolution,f.isPowerOfTwo=o.sharedTextureSource.isPowerOfTwo,g._updateID++,g._frame.width=f.width,g._frame.height=f.height,this.pixiApp.renderer.textureManager.updateTexture(f),this.maskSprite.setTransform(0,0,1/a,1/l,0,0,0,0,0)}super.render()}_changePaths(e){const t=this.mimicNode.ref.child.clipBounds;let i;i=!e||0===e.length||1===e.length&&"rect"===e[0].type?"rect":1===e.length&&"ellipse"===e[0].type?"ellipse":"arbitrary",this.height=t.height,this.width=t.width,this.clipType=i,this.x=t.minX,this.y=t.minY,this.isDirtyRender=!0}changeGlobalPlacement(e,t){const i=e.transformValues,r=t.transformValues;(Math.abs(i.xscale-r.xscale)>1e-9||Math.abs(i.yscale-r.yscale)>1e-9)&&(this.isDirtyRender=!0),super.changeGlobalPlacement(e,t)}changeProperties(e,t){const i=e;t.forEach(e=>{switch(e){case n.PGMMimicClipNode.PROP_PATHS:this._changePaths(i.paths);break;case n.PGMMimicNode.PROP_MARKED_BOUNDS:break;default:this.log.warning(`clip did not observe property change '${e}'`)}})}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}installMaskSprite(){this.teardownMaskGraphics(),this.maskSprite||(this.maskSpriteBaseTexture=new PIXI.BaseTexture(o.sharedTextureSource.getCanvas()),this.maskSpriteBaseTexture.mipmap=!1,this.maskSpriteTexture=new PIXI.Texture(this.maskSpriteBaseTexture),this.maskSprite=new PIXI.Sprite(this.maskSpriteTexture),this.pixiDisplayObject.mask=this.maskSprite,this.pixiDisplayObject.addChild(this.maskSprite))}teardownMaskSprite(){this.maskSprite&&(this.pixiDisplayObject.removeChild(this.maskSprite),this.pixiDisplayObject.mask=null,this.maskSprite.destroy({texture:!0,baseTexture:!0}),this.maskSprite=null)}installMaskGraphics(){return this.teardownMaskSprite(),this.maskGraphics||(this.maskGraphics=new PIXI.Graphics,this.pixiDisplayObject.mask=this.maskGraphics,this.pixiDisplayObject.addChild(this.maskGraphics)),this.maskGraphics}teardownMaskGraphics(){this.maskGraphics&&(this.pixiDisplayObject.removeChild(this.maskGraphics),this.pixiDisplayObject.mask=null,this.maskGraphics.destroy(),this.maskGraphics=null)}}t.default=o,o.TYPE="clip",o.sharedTextureSource=new s.default},vKWb:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Text=void 0;const r=i("CkXF"),n=i("UzQk"),s=i("Em2v"),o=i("0gjg"),a=i("wYSo"),l=i("lzL7"),h=i("NG98");var c;!function(e){e[e.VIEWPORT_BOUNDED_TEXTURE=0]="VIEWPORT_BOUNDED_TEXTURE",e[e.NODE_BOUNDED_TEXTURE=1]="NODE_BOUNDED_TEXTURE",e[e.UNUSABLE_TEXTURE=2]="UNUSABLE_TEXTURE",e[e.NO_TEXTURE=3]="NO_TEXTURE"}(c||(c={}));class d extends r.default{constructor(e,t){super(e,t),this.validateCount=0,this.isInRenderQueue=!1,this.textureOffset={x:0,y:0},this.textureFontSize=void 0,this.renderedFontSize=void 0,this.textureSharpness=1,this.textureState=c.NO_TEXTURE,this.pendingTextureState=c.NO_TEXTURE,this.renderedTextureGlobalPlacement=n.Matrix2D.Identity,this.globalBoundsWidth=0,this.globalBoundsHeight=0,this.globalTransform=n.Matrix2D.Identity,this.dirtied={shape:!1,color:!1},this.prevDirtied={shape:!1,color:!1},this.prevIsAnimating=!1,this.colorStrategy={useColorizeFilter:!1,colorizeFillColor:n.SolidColor.ZERO,colorizeStrokeColor:n.SolidColor.ZERO},this.baseTexture=new PIXI.BaseTexture(d.TEXTURE_SOURCE.getCanvas()),this.baseTexture.mipmap=!1,this.texture=new PIXI.Texture(this.baseTexture),this.sprite=new PIXI.Sprite(this.texture),this.pixiDisplayObject.addChild(this.sprite),this.isDirtyRender=!0,this.textureState=c.UNUSABLE_TEXTURE,this.debug("constructor()")}static set TextTextureInstance(e){if(void 0!==d.TEXTURE_SOURCE)throw new Error("Attempt to set TextTextureInstance after it's already been set.");d.TEXTURE_SOURCE=e}destroy(e){this.sprite.destroy({children:!0,texture:!0,baseTexture:!0}),this.sprite=null,super.destroy(e)}autoApplyAlphaFilter(){return!this.colorStrategy.useColorizeFilter}filter(){this.colorStrategy.useColorizeFilter&&(this.colorizeFilter||(this.colorizeFilter=new h.default),this.colorizeFilter.redChannelArtworkColor=this.colorStrategy.colorizeFillColor,this.colorizeFilter.greenChannelArtworkColor=this.colorStrategy.colorizeStrokeColor,this.colorizeFilter.alpha=this.opacity,this.colorizeFilter.resolution=this.pixiApp.renderer.resolution,this.filters.push(this.colorizeFilter)),super.filter()}isVisibleWithinDocument(e){const t=e.bounds,i=this.asyncRenderer.activeRender.graph.bounds.width,n=this.asyncRenderer.activeRender.graph.bounds.height;return r.default.isBoundsInDocument(t,this.globalPlacement,i,n)}place(){super.place(),this.updateSpritePlacement()}changeRenderScale(e,t){this.isDirtyRender=!0,super.changeRenderScale(e,t)}debug(e){}changeProperties(e,t){this.debug(`changeProperties(${t.join(",")})`),t.forEach(e=>{switch(e){case n.PGMMimicTextNode.PROP_BOUNDS:case n.PGMMimicTextNode.PROP_TEXT:case n.PGMMimicTextNode.PROP_STYLE_FONT:case n.PGMMimicTextNode.PROP_STYLE_STROKE_WIDTH:case n.PGMMimicTextNode.PROP_STYLE_TRACKING:this.dirtied.shape=!0;break;case n.PGMMimicTextNode.PROP_RENDERRUNS:this.dirtied.shape=!0,this.dirtied.color=!0;break;case n.PGMMimicNode.PROP_MARKED_BOUNDS:case n.PGMMimicTextNode.PROP_STYLE:break;case n.PGMMimicTextNode.PROP_STYLE_FILL_COLOR:case n.PGMMimicTextNode.PROP_STYLE_STROKE_COLOR:this.dirtied.color=!0;break;default:this.log.warning("Text: notified about unwatched property "+e)}})}validate(){const e=0==this.validateCount++,t=this.mimicNode,i=this.asyncRenderer.activeRender.graph.bounds.area,o=t.ctm,a=l.default.decomposeScale(o.asArray),h=t.bounds.width*a.x,d=t.bounds.height*a.x,u=i<4*r.default.areaOfBoundsAtDocumentScale(o,t.bounds);u?this.globalTransform.equal(o)||(this.isDirtyRender=!0):this.globalBoundsWidth===h&&this.globalBoundsHeight===d||(this.isDirtyRender=!0),this.globalBoundsWidth=h,this.globalBoundsHeight=d,this.globalTransform=o,this.pendingTextureState=u?c.VIEWPORT_BOUNDED_TEXTURE:c.NODE_BOUNDED_TEXTURE;const p=this.asyncRenderer.hints.isAnimating;if(e||this.dirtied.shape||this.dirtied.color||p!==this.prevIsAnimating){const e=t.renderRuns,i=e=>0===e.length||1===e.length&&0===e[0].range.start&&e[0].range.end===t.text.length,r=this.colorStrategy.useColorizeFilter;this.colorStrategy.useColorizeFilter=p&&this.dirtied.color&&this.prevDirtied.color&&!s.EmojiUtils.isEmoji(t.text)&&i(e.fillColors.runArrays)&&i(e.strokeColors.runArrays);const o=this.colorStrategy.useColorizeFilter!==r;this.colorStrategy.useColorizeFilter&&(this.colorStrategy.colorizeFillColor=0===e.fillColors.runArrays.length?t.style.fillColor||n.SolidColor.ZERO:e.fillColors.runArrays[0].attr,this.colorStrategy.colorizeStrokeColor=0===e.strokeColors.runArrays.length?t.style.strokeColor||n.SolidColor.ZERO:e.strokeColors.runArrays[0].attr),(this.dirtied.shape||o||!this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyRender=!0,this.textureState=c.UNUSABLE_TEXTURE),(o||this.colorStrategy.useColorizeFilter&&this.dirtied.color)&&(this.isDirtyFilter=!0),this.prevDirtied=this.dirtied,this.prevIsAnimating=p,this.dirtied={shape:!1,color:!1}}super.validate()}render(){this.debug("render begin"),this.notifyAsyncRenderBegin(),this.textureState===c.NO_TEXTURE||this.textureState===c.UNUSABLE_TEXTURE||this.asyncRenderer.activeRender.fullQuality?this.updateTexture():this.isInRenderQueue||(this.isInRenderQueue=!0,a.default.instance.addNormalPriority(()=>{this.updateTexture(),this.bubble("background-text-rerender",{text:this})})),super.render(),this.debug("render end")}updateTextureWithinDocumentBounds(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.strokeWidth,n=t.font,s=n.weight||"normal",o=n.cssName||n.family,a=n.style||"",h=e.fontSize,c=this.asyncRenderer.activeRender.graph.bounds,u=c.width,p=c.height,m=this.pixiApp.stage.scale.x*this.pixiApp.renderer.resolution,f=u*m,g=p*m,x=l.default.getScalingTransform(m,m),y=[1,0,0,1,i.minX,i.minY+h*n.ascentRatio],b=l.default.multiply([],x,this.globalPlacement.asArray),v=l.default.multiply([],b,y);this.textureFontSize=h,this.textureOffset.x=0,this.textureOffset.y=0,this.renderedTextureGlobalPlacement=this.globalPlacement,d.TEXTURE_SOURCE.setSize(f,g).setTransform(v).setFontSize(h).setFont(`${a} ${s} ${h}px ${o}`).setStrokeWidth(r)}updateTextureWithinNodeBounds(){const e=this.mimicNode,t=e.style,i=t.font,r=i.weight||"normal",n=i.cssName||i.family,s=i.style||"",o=e.fontSize,a=(o<100?1.333:1)*this.pixiApp.renderer.resolution,l=this.renderScale*a,h=o*l,c=t.strokeWidth*l,u=h<16?Math.ceil(h):Math.ceil(2*h)/2,p=t.strokeWidth?Math.max(.1*a,Math.round(c*(u/h)*2)/2):0,m=u/o,f=-e.markedBounds.minX*m,g=e.markedBounds.width*m,x=e.markedBounds.height*m,y=e.markedBounds.maxY*m,b=y-u*i.ascentRatio,v=[1,0,0,1,f,y];this.textureFontSize=u,this.textureOffset.x=-f,this.textureOffset.y=-b,d.TEXTURE_SOURCE.setSize(g,x).setTransform(v).setFontSize(u).setFont(`${s} ${r} ${u}px ${n}`).setStrokeWidth(p)}updateTexture(){if(this.debug("updateTexture begin"),this.isInRenderQueue=!1,this.isDestroyed)return;const e=this.mimicNode,t=e.style,i=e.text;let r,s;this.colorStrategy.useColorizeFilter?(r=t.fillColor?"#FF0000":null,s=t.strokeColor?"#00FF00":null):(r=t.fillColor?"#"+o.default.rgb2hex(t.fillColor):null,s=t.strokeColor?"#"+o.default.rgb2hex(t.strokeColor):null);const a=t.tracking;d.TEXTURE_SOURCE.begin().setText(i).setFillColor(r).setStrokeColor(s).setTracking(a),this.colorStrategy.useColorizeFilter?d.TEXTURE_SOURCE.setRenderRuns(n.PGMRenderRuns.EMPTY):d.TEXTURE_SOURCE.setRenderRuns(e.renderRuns),this.pendingTextureState===c.VIEWPORT_BOUNDED_TEXTURE?this.updateTextureWithinDocumentBounds():this.updateTextureWithinNodeBounds(),d.TEXTURE_SOURCE.render().end(),this.workaroundUpdateTexture(d.TEXTURE_SOURCE.isPowerOfTwo),this.textureState=this.pendingTextureState,this.updateSpritePlacement(),this.notifyAsyncRenderEnd(),this.debug("updateTexture end")}workaroundUpdateTexture(e){const t=this.baseTexture,i=this.texture;t.realWidth=t.source.width,t.realHeight=t.source.height,t.width=t.realWidth/t.resolution,t.height=t.realHeight/t.resolution,t.isPowerOfTwo=e,i._updateID++,i._frame.width=t.width,i._frame.height=t.height,this.pixiApp.renderer.textureManager.updateTexture(t)}updateSpritePlacement(){const e=this.mimicNode,t=e.style,i=e.bounds,r=t.font,n=i.height/(r.ascentRatio+r.descentRatio),s=n/this.textureFontSize;if(this.textureState===c.NODE_BOUNDED_TEXTURE){const e=i.minX+this.textureOffset.x*s,t=i.minY+this.textureOffset.y*s;this.sprite.setTransform(e,t,s,s,0,0,0,0,0)}else if(this.textureState===c.VIEWPORT_BOUNDED_TEXTURE){const e=this.pixiApp.stage.scale.x*this.textureSharpness*this.pixiApp.renderer.resolution,t=l.default.getScalingTransform(e,e),i=l.default.multiply([],t,this.renderedTextureGlobalPlacement.asArray),r=l.default.invert([],i),s=n/this.textureFontSize;let o=r;if(1!==s){const e=l.default.getScalingTransform(s,s);o=l.default.multiply([],r,e),o[4]*=s,o[5]*=s}const a=l.default.decompose(o),{position:h,rotation:c,scale:d,skew:u}=a;this.sprite.setTransform(h.x,h.y,d.x,d.y,c,u.x,u.y,0,0)}}}t.Text=d,d.TYPE="text"},vr9a:function(e,t,i){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TargetRenderParameters=t.TargetRenderTypeHint=t.TargetTransformTypeEnum=void 0,function(e){e.FitCentered="fit-centered",e.FillCentered="fill-centered"}(r=t.TargetTransformTypeEnum||(t.TargetTransformTypeEnum={})),function(e){e.ForScreen="for-screen",e.ForThumbnail="for-thumbnail",e.ForFinalForm="for-final-form",e.ForAnalysis="for-analysis",e.ForDebugging="for-debugging",e.ForVideo="for-video"}(t.TargetRenderTypeHint||(t.TargetRenderTypeHint={}));class n{constructor(e,t,i,r,n){this.transformType=e,this.width=Math.floor(t),this.height=Math.floor(i),this.encoding=r,this.typeHint=n||null}static forGraph(e,t,i){return n.forGraphWithResolution(e,1,t,i)}static forGraphWithResolution(e,t,i,s){return new n(r.FitCentered,e.bounds.width*t,e.bounds.height*t,i,s)}static forGraphAtSize(e,t,i,r){const s=t/Math.max(e.bounds.width,e.bounds.height);return n.forGraphWithResolution(e,s,i,r)}static fit(e,t,i,s){return new n(r.FitCentered,e,t,i,s)}}t.TargetRenderParameters=n},vuLH:function(e,t,i){"use strict";(function(e){var r=this&&this.__awaiter||function(e,t,i,r){return new(i||(i=Promise))((function(n,s){function o(e){try{l(r.next(e))}catch(e){s(e)}}function a(e){try{l(r.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiQueuedImageRenderer=void 0;const n=i("uzmb"),s=i("Ej8W"),o=i("yFMF"),a=i("vr9a");t.PixiQueuedImageRenderer=class{constructor(e){this.log=e.log,this.renderer=new s.default({hostAPI:e.hostAPI,assetLoader:e.assetLoader,log:e.log,preserveDrawingBuffer:!0,addDebugText:!1}),this.renderer.hints.isAnimating=e.renderingAnimation,this.renderer.hints.isProducingVideo=e.renderTypeHint===a.TargetRenderTypeHint.ForVideo,this.bufferCanvas=document.createElement("canvas"),this.bufferCanvasContext=this.bufferCanvas.getContext("2d")}getExportCanvas(){const e=this.renderer.getRootRenderTarget(),t=e.resolution,i=e.size.width*t,r=e.size.height*t,n=this.getPixelData(0,0,i,r);this.bufferCanvas.width=i,this.bufferCanvas.height=r;const s=this.bufferCanvasContext.createImageData(i,r);return s.data.set(n),this.bufferCanvasContext.putImageData(s,0,0),Promise.resolve(this.bufferCanvas)}getPixelData(e,t,i,r){const n=this.renderer.getGLRenderer(),s=this.renderer.getRootRenderTarget(),o=new Uint8Array(4*i*r),a=n.gl;return n.bindRenderTarget(s),a.readPixels(e,t,i,r,a.RGBA,a.UNSIGNED_BYTE,o),o}renderImage(t,i,s,a){return r(this,void 0,void 0,(function*(){let l;return yield this.renderer.render(t,i,s,{assetLoader:a,demultiplyAndFlip:!0,postRenderCallback:t=>r(this,void 0,void 0,(function*(){const r=this.renderer.canvas,{width:s,height:a}=i;if(s!==r.width||a!==r.height)throw this.log.error("internal error: canvas size doesn't match the requested size."),new Error("internal error: canvas size doesn't match the requested size.");const h=i.encoding;if(h instanceof n.PNGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/png"),i=o.default.dataURLToEncoding(e,h.binaryEncoding);l={encoding:h,width:s,height:a,data:i,extra:t}}else if(h instanceof n.JPGEncoding){const e=(yield this.getExportCanvas()).toDataURL("image/jpeg",h.quality),i=o.default.dataURLToEncoding(e,h.binaryEncoding);l={encoding:h,width:s,height:a,data:i,extra:t}}else{if(!(h instanceof n.RawEncoding))throw new Error("unexpected encoding type");{const i=this.getPixelData(0,0,s,a);if(h.binaryEncoding===n.ImageBinaryEncodingEnum.Buffer)l={encoding:h,width:s,height:a,data:e.from(i.buffer),extra:t};else{if(h.binaryEncoding!==n.ImageBinaryEncodingEnum.Uint8Array)throw new Error("unexpected encoding type");l={encoding:h,width:s,height:a,data:i,extra:t}}}}}))}),l}))}destroy(){this.renderer.destroy(),this.renderer=null}}}).call(this,i("HDXh").Buffer)},wHG3:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Core=t.PixiJSRenderer=t.PixiJSApp=void 0;var r=i("Lkow");Object.defineProperty(t,"PixiJSApp",{enumerable:!0,get:function(){return r.PixiJSApp}}),Object.defineProperty(t,"PixiJSRenderer",{enumerable:!0,get:function(){return r.PixiJSRenderer}});const n=i("UzQk");t.Core=n},wYSo:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this.tailQ=[],this.primaryQ=[],this.MAX_WORK_TIME_MS=4,this.MAX_BATCH_SIZE=6,this.isRunning=!1}processTailQ(){this.primaryQ.length>0?this.processQ():this.tailQ.length>0?(this.tailQ.shift()(),setTimeout(this.processTailQ.bind(this),0)):this.isRunning=!1}processQ(){const e=Date.now();let t,i=0,r=this.primaryQ.length;for(;r>0&&(i++,!(i%this.MAX_BATCH_SIZE==0&&Date.now()-e>=this.MAX_WORK_TIME_MS))&&(t=this.primaryQ.shift());)t(),r--;r>0?setTimeout(this.processQ.bind(this),0):this.processTailQ()}run(){this.isRunning||(this.isRunning=!0,setTimeout(this.processQ.bind(this),0))}addNormalPriority(e){this.primaryQ.push(e),this.run()}addHighPriority(e){this.primaryQ.unshift(e),this.run()}addLowPriority(e){this.tailQ.push(e),this.run()}hasItemsInQueue(){return this.primaryQ.length>0}}t.default=r,r.instance=new r},xBmG:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LiveViewTextureCachePrimedEvent=t.LiveViewLoadingImagesEndEvent=t.LiveViewLoadingImagesBeginEvent=t.LiveViewAnimationRenderCompleteEvent=t.LiveViewFrameRenderCompleteEvent=t.LiveViewEvent=t.LiveViewDynamicRenderParams=void 0;class r{constructor(e){this.startTime=e.startTime||0,this.endTime=e.endTime||-1,this.loop=e.loop||!1}}t.LiveViewDynamicRenderParams=r,r.DEFAULT=new r({});class n{constructor(e){this.type=e}}t.LiveViewEvent=n;class s extends n{constructor(e,t){super(s.TYPE),this.graph=e,this.time=t}}t.LiveViewFrameRenderCompleteEvent=s,s.TYPE="frame-render-complete";class o extends n{constructor(e){super(o.TYPE),this.graph=e}}t.LiveViewAnimationRenderCompleteEvent=o,o.TYPE="animation-render-complete";class a extends n{constructor(){super(a.TYPE)}}t.LiveViewLoadingImagesBeginEvent=a,a.TYPE="loading-images-begin";class l extends n{constructor(){super(l.TYPE)}}t.LiveViewLoadingImagesEndEvent=l,l.TYPE="loading-images-end";class h extends n{constructor(){super(h.TYPE)}}t.LiveViewTextureCachePrimedEvent=h,h.TYPE="texture-cache-primed"},xGui:function(e,t,i){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,i,r){void 0===r&&(r=i),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,r){void 0===r&&(r=i),e[r]=t[i]}),n=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||r(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),t.PixiApplication=void 0,n(i("DAf/"),t),n(i("6xl/"),t),n(i("3hRk"),t),n(i("xBmG"),t),n(i("W4vr"),t),n(i("BTPj"),t),n(i("6ygk"),t),n(i("uzmb"),t),n(i("vr9a"),t),n(i("Escq"),t),n(i("bNrw"),t),n(i("vKWb"),t);var s=i("1HQJ");Object.defineProperty(t,"PixiApplication",{enumerable:!0,get:function(){return s.PixiApplication}})},xtw7:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=i("RyLA"),n=i("UzQk");function s(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function o(e){return e&&0==(e&e-1)}t.default=class{constructor(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=10,this.height=10,this.color="#FFFFFF",this.strokeColor="#FFFFFF",this.legacyRender=!1,this.paths=[],this.isPowerOfTwo=!1,this.renderer=new r.default(this.context,null),this.canvas.style.pointerEvents="none"}begin(){return this.context.save(),this}end(){return this.context.restore(),this}setTransform(e){return this.transform=e,this}setSize(e,t){return this.width=e,this.height=t,this}setPath(e){return this.setPaths([e])}setPaths(e){return this.paths=e,this}setColor(e){return this.color=e,this}setStrokeColor(e){return this.strokeColor=e,this}setLegacyRender(e){return this.legacyRender=e,this}doFill(e){this.context.fillStyle=this.color,this.context.strokeStyle=null,this.context.fill(e.pathFillType)}doStroke(e){e.pathStrokeWeight>0&&(this.context.strokeStyle=this.strokeColor,this.context.fillStyle=null,this.context.stroke())}doLegacyStroke(e){this.context.strokeStyle=this.color,this.context.fillStyle=null,this.context.stroke()}render(e=!1){const t=e||Math.max(this.width,this.height)<=1024;t?(this.canvas.width=s(Math.round(this.width)),this.canvas.height=s(Math.round(this.height)),this.isPowerOfTwo=t):(this.canvas.width=Math.ceil(this.width),this.canvas.height=Math.ceil(this.height),this.isPowerOfTwo=o(this.canvas.width)&&o(this.canvas.height)),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.transform.apply(this.context,this.transform);for(var i=0,r=this.paths.length;i<r;++i){var a=this.paths[i];this.context.lineWidth=a.pathStrokeWeight,this.context.miterLimit=a.pathMiterLimit,this.context.lineJoin=a.pathJoinType,this.context.lineCap=a.pathEndcapType,a.render(this.renderer),a.pathFillType!==n.TheoPath.PATHFILL_NONE?this.doFill(a):this.legacyRender&&this.doLegacyStroke(a),!this.legacyRender&&this.strokeColor&&this.doStroke(a)}return this}getCanvas(){return this.canvas}destroy(){return this.canvas=null,this.context=null,this}}},yFMF:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});const r=i("uzmb");class n{static dataURLToEncoding(e,t){switch(t){case r.ImageBinaryEncodingEnum.Buffer:return n.dataURLtoBuffer(e);case r.ImageBinaryEncodingEnum.Uint8Array:return new Uint8Array(n.dataURLtoBuffer(e));case r.ImageBinaryEncodingEnum.DataURL:return e;default:throw new Error("unrecognized encoding "+t)}}static dataURLtoBuffer(t){const i=t.indexOf(";base64,");if(i>=0){const r=t.substr(i+";base64,".length);if(void 0===e)throw new Error("Must polyfill Buffer on web");return e.from(r,"base64")}return null}static dataURLtoBlob(e){const t=e.split(","),i=t[0],r=t[1],n=i.split(":")[1].split(";")[0],s=i.indexOf("base64")>=0?atob(r):unescape(r),o=s.length,a=new Uint8Array(o);for(let e=0;e<o;e++)a[e]=s.charCodeAt(e);return new Blob([a],{type:n})}}t.default=n}).call(this,i("HDXh").Buffer)},z8uW:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiFrameProductionService=void 0;const r=i("3hRk"),n=i("vuLH");class s{constructor(e,t,i,r,s){this.api=e,this.assetLoader=i,this.graph=t,this.parameters=r,this.frameRate=s,this.observers={},this.renderer=new n.PixiQueuedImageRenderer({hostAPI:e.host,assetLoader:i,log:e.log,renderingAnimation:!0,renderTypeHint:r.typeHint})}on(e,t){let i=this.observers[e];i?i.push(t):(i=[t],this.observers[e]=i)}publish(e){let t=this.observers[e.type];t&&t.forEach(t=>{try{t(e)}catch(e){console.log("throw during event processing",e)}})}begin(){this.frameIndex=-1,this.doNextFrame()}doNextFrame(){if(this.canceled)this.publish(new r.FrameProductionCanceledEvent);else{this.frameIndex++;let e=this.frameIndex/this.frameRate;e>this.graph.duration?this.publish(new r.FrameProductionCompleteEvent):this.renderer.renderImage(this.graph,this.parameters,e).then(t=>{this.canceled||(this.publish(new r.FrameDataEvent(this.frameIndex,e,t)),this.doNextFrame())}).catch(e=>{this.publish(new r.FrameErrorEvent(e)),this.cancel(),this.publish(new r.FrameProductionCanceledEvent)})}}cancel(){this.canceled=!0}destroy(){this.renderer.destroy(),this.renderer=null}renderFrame(e,t){return this.renderer.renderImage(this.graph,t,e)}}t.PixiFrameProductionService=class{constructor(e){this.api=e}createProducer(e,t,i,r){return new s(this.api,e,t,i,r)}}},zrCk:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PixiImageQueue=t.PixiImageService=void 0;const r=i("vuLH");t.PixiImageService=class{constructor(e){this.api=e}createQueue(e){return new n(this.api,e)}};class n{constructor(e,t){this.api=e,this.renderer=new r.PixiQueuedImageRenderer({hostAPI:this.api.host,log:this.api.log,assetLoader:t||e.defaultAssetLoader,renderingAnimation:!1})}render(e,t,i,r){return this.renderer.renderImage(e,t,i||0,r)}destroy(){this.renderer.destroy(),this.renderer=null}}t.PixiImageQueue=n}}]);
//# sourceMappingURL=vendors_npm_spark-51db2c15.js.map